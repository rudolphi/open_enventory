var ab="Sciformation VectorMol (c) 2012-2019 Felix Rudolphi",M=Math,ac=90,ad=120,ae=180,af=M.PI/ae,ag=1/af,ah=2*M.atan(M.SQRT2),ai=ah*ag,aj=360,ak=21600,T=true,F=false,al,S=" ",am="px",an=Number.MAX_VALUE,ao="obj",C="C",H="H",ap="\nM  ",aq="SUP",ar="MUL",as="SRU",at=".menuPopup",au=".menuWithPopup",av=[0,2,1,3],aw="font-size",ax="stroke",ay="stroke-opacity",az="stroke-width",aA="stroke-dasharray",aB="--",aC="text-anchor",aD="fill",aE="<sub>",aF="</sub>",aG="atom",aH="draw",aI="drawChain",aJ="drawHotspot",aK="selRect",aL="selLasso",aM="rotate",aN="3d_rotate",aO="bond_rotate",aP="delete",aQ="insertTemplate",aR="paste",aS="drawPlus",aT="drawArrow",aU="zoomIn",aV,aW,aX,aY,aZ,a0,a1,a2,a3,a4,a5=0,a6=new RegExp("^(\\d*)([A-Z%*][a-z#]{0,2})(H\\d*)?\\s*(\\d*[\\+\\-]+)?\\s*$"),a7={8:0,4:1.5},a8=0,a9=1,a_=2,ba=3,bb=4;
bc=parseInt;
function bd(a){return a.length}function be(){for(var c=0,b=0,a=bd(arguments);
b<a;
b++){c+=arguments[b]}return c/a}function bf(b){var e=[],f=[],d,c,a;
for(d in b){f.push(d)}f.sort();
for(c=0,a=bd(f);
c<a;
c++){d=f[c];
e[d]=b[d];
delete b[d]}for(c=0;
c<a;
c++){d=f[c];
b[d]=e[d]}}function bg(a,c){for(var b in a){if(a[b]==c){return b}}}function bh(b){if(!b){return b}var a=/^[\s\n\r\t]*(.*?)[\s\n\r\t]*$/;
if(a.exec(b)){return RegExp.$1}}function bi(e,h,j){if(!$.isArray(h)){return e}var a=[],f=0,b,g,d,c;
for(d=0,c=bd(h);
d<c;
d++){b=h[d];
g=e.substr(f,b);
if(!j){g=bh(g)}a.push(g);
f+=b}if(bd(e)>b){g=e.substr(f);
if(!j){g=bh(g)}a.push(g)}return a}function bj(d){for(var c=[],b,e=0,a=(d?bd(d):0);
e<a;
e++){if(d.charAt(e)==S){continue}b=d.indexOf(S,e+1);
if(b==-1){c.push(d.substr(e));
break}c.push(d.substring(e,b));
e=b}return c}function bk(b,c,a){var d=b.substr(0,bd(c));
if(a!=T){d=d.toLowerCase();
c=c.toLowerCase()}return(d==c)}function bl(c,d,b){var e=bd(c)-bd(d),a;
if(e<0){return F}a=c.substr(e);
if(b!=T){a=a.toLowerCase();
d=d.toLowerCase()}return(a==d)}function bm(b){if(b==al||b==""){return""}b=String(b);
var a="\n";
b=b.replace(/:/g,".");
b=b.replace(/\r\n/g,a);
b=b.replace(/\r/g,a);
b=b.replace(/\|/g,a);
return b}function bn(e,c){c=bc(c);
if(isNaN(c)||c<1){return""}e=String(e);
for(var d="",b=0;
b<c;
b++){d+=e}return d}function bo(a,b){return bp(a,b,S)}function bp(c,d,b){c=String(c);
if(bd(c)>d){return c.substr(0,d)}var a=bd(c);
while(a<d){a++;
c=b+c}return c}function bq(c,d,b){c=String(c);
if(bd(c)>d){return c.substr(0,d)}var a=bd(c);
while(a<d){a++;
c+=b}return c}function br(a){a=String(a);
return a.replace(/(["\\])/g,"\\$1")}function bs(a){return'"'+br(a)+'"'}function bt(a,b){if(a==al||a==null||(isNaN(a)&&typeof a=="number")){return b}return a}function bu(a){return bt(a,0)}function bv(a){return bt(a,"")}function bw(b){b=String(b);
var a=b.match(/\-?\d+[\.,]?\d*/);
if(a!=null&&bd(a)>0){return bv(a[0])}return""}function bx(c,b,a){return M.max(b,M.min(a,c))}function round(c,e,f){var g=1,d,b,a;
c=parseFloat(c);
e=bc(e);
if(isNaN(c)||c==al){return""}if(f!=3){if(c==0){return 0}if(c<0){g=-1;
c*=-1}}b=M.pow(10,e);
switch(f){case 1:d=M.floor(M.log(c)/M.LN10);
break;
case 2:d=M.floor(M.log(c)/3/M.LN10)*3;
break;
case 3:return c.toFixed(bx(e,0,20));
break;
case 4:e-=M.ceil(M.log(c)/M.LN10);
return g*c.toFixed(bx(e,0,20));
break;
default:return(g*M.round(c*b)/b)}switch(f){case 1:case 2:a=String(g*M.round(c/M.pow(10,d)*b)/b);
if(d==0){return a}return a+"&sdot;10<sup>"+d+"</sup>"}}function by(c){var b=location.search,d,a;
if(b&&c){d=new RegExp("[&?]"+c+"=([^&$]*)");
if(a=d.exec(b)){return a[1]}}}function bz(){return a5++}function s(a){return bv(langDef[a])}function bA(){if($.inArray(lang,bB)>=0){document.write('<script type="text/javascript" src="lang_'+lang+'.js"><\/script>')
}}function bC(){$(".button, .wTooltip").attr("title",function(){return s(this.id)})}function bD(){this.bE=bz();
this.bF=this.bE;
this.bG=bG}function bH(b,a,c){if(b.bI){c.bF=a.bF}b.bJ[a.bE]=c}function bG(a){return a!=al&&this.bF==a.bF}function bK(a){return a!=al&&this.bE==a.bE}function bL(a,b){return bM(a,b)>=0}function bM(b,d){for(var c=0,a=bd(b);
c<a;
c++){if(b[c].bG(d)){return c}}return -1}function bN(b,a){b.push.apply(b,a)}function bO(a,b){if(b!=al){a.push(b)}}function bP(a,c){for(var b=bd(a)-1;
b>=0;
b--){if(!bL(c,a[b])){a.splice(b,1)}}}function bQ(b,a){for(var c,d=bd(b)-1;
d>=0;
d--){for(c=bd(a)-1;
c>=0;
c--){if(b[d].bG(a[c])){b.splice(d,1);
break}}}}function bR(b,e,c){for(var d=0,a=bd(b);
d<a;
d++){if(b[d].bG(e)){b[d]=c;
return T}}return F}function bS(d,b){if(b){for(var c=0,a=bd(b);
c<a;
c++){if(b[c].bG(d)){b.splice(c,1);
return T}}}return F}function bT(a,b){if(b==al){b=1}if(b!=0){a.unshift.apply(a,a.splice(b,bd(a)))}}function bU(b,d){for(var c=0,a=bd(d);
c<a;
c++){if(!bL(b,d[c])){return F}}return T}function bV(e,d){var b=Array.apply(al,arguments),c=[],f,a;
if(bd(b)>2){e=b.pop();
d=bV.apply(al,b)}for(f=0,a=bd(e);
f<a;
f++){if(bL(d,e[f])){c.push(e[f])}}return c}function bW(e,b){for(var c=[],d=0,a=bd(e);
d<a;
d++){if(!bL(b,e[d])){c.push(e[d])}}return c}function bX(c,b){for(var d=0,a=bd(b);
d<a;
d++){bY(c,b[d])}}function bY(a,b){if(b!=al&&!bL(a,b)){a.push(b);
return T}return F}function bZ(a){if(a==al){return al}return this.bJ[a.bE]}function b0(b){if(b==al){return al}var c=this.bJ[b.bE],a;
if(!c){for(a in this.bJ){if(b.bG(this.bJ[a])){return b}}c=b.b1(this);
this.bJ[b.bE]=c}return c}function b2(a){this.bJ={};
this.bI=a;
this.bZ=bZ;
this.b0=b0}function b3(a){return(720+a)%aj}function b4(a){var b=this.b1();
b.x+=a.x;
b.y+=a.y;
b.z+=a.z;
return b}function b5(b,a){var c=this.b1();
c.x-=b.x;
c.y-=b.y;
c.z=(a?0:c.z-b.z);
return c}function b6(b){var c=this,a=c.bd();
return(a>0?c.b7((b||1)/a):new b8())}function b9(b,a,d){var c=this;
if(b instanceof b8){c.x+=b.x;
c.y+=b.y;
c.z+=b.z}else{c.x+=b;
c.y+=a;
c.z+=bu(d)}}function b_(a){return(this.x==a.x&&this.y==a.y&&this.z==a.z)}function ca(g,e,c){var f=this,a,b,d;
if(f.bd()==0||f.cb(g)<0){return F}a=f.cc(g,e);
if(!a){return isNaN(a)}b=f.cc(e,c);
if(!b){return isNaN(b)}return(d=f.cc(c,g)?(a*b>0&&a*d>0):isNaN(d))}function cd(b,a){var d=this.cb(b.ce(a));
if(d==0&&this.cf(a)<b.cf(a)){return NaN}return d}function cg(a){var b=this;
return new b8(b.x*a,b.y*a,b.z*a)}function ch(b,a){if(b!=1){var c=this;
if(a){c.ci(-a.x,-a.y,-a.z)}c.x*=b;
c.y*=b;
c.z*=b;
if(a){c.ci(a)}}}function cj(b,a){var c=this;
if(b&1){c.x=2*a.x-c.x}if(b&2){c.y=2*a.y-c.y}}function ck(c,b){if(b){this.ci(-b.x,-b.y,-b.z)}var f=this,d=M.cos(c),e=M.sin(c),a=f.x*d-f.y*e;
f.y=f.x*e+f.y*d;
f.x=a;
if(b){f.ci(b)}}function cl(d,c,a){if(a){this.ci(-a.x,-a.y,-a.z)}var g=this,b=M.cos(c),f=M.sin(c),e=g.z*b-g.x*f;
g.x=g.x*b+g.z*f;
b=M.cos(d);
f=M.sin(d);
g.z=g.y*f+e*b;
g.y=g.y*b-e*f;
if(a){g.ci(a)}}function cm(i,h,g,f){var e=this,c=e.cn(i),b=e.cn(h),d=co(c,b),a;
if(f){a=c.ce(b);
a=a.ce(d).cp();
if(a){d.cq(f*af,a)}}if(g){d=d.cp(g)}d.ci(e);
return d}function cr(a){var b=this.cn(a);
return M.abs(b.x)+M.abs(b.y)-M.abs(b.z)}function cs(g,e,d){var f=this,c=g.cn(f),b=e.cn(f),a=c.ce(b);
if(d){a=a.ce(d.cn(f))
}return a.cp()}function ct(m,g,a){if(m){if(a){this.ci(-a.x,-a.y,-a.z)}var e=this,i=M.cos(m),h=1-i,f=M.sin(m),l=e.x,k=e.y,j=e.z,d=g.x,c=g.y,b=g.z;
e.x=l*(i+d*d*h)+k*(d*c*h-b*f)+j*(d*b*h+c*f);
e.y=l*(c*d*h+b*f)+k*(i+c*c*h)+j*(c*b*h-d*f);
e.z=l*(b*d*h-c*f)+k*(b*c*h+d*f)+j*(i+b*b*h);
if(a){e.ci(a)}}}function cu(){return M.sqrt(this.cb(this))}function cv(b,a){var c=this.cn(b);
if(a){c.z=0}return c.bd()}function cw(a){var b=this;
return b.x*a.x+b.y*a.y+b.z*a.z}function cx(b,a){var c=this;
if(a){c=c.cn(a);
b=b.cn(a)}return new b8(c.y*b.z-c.z*b.y,c.z*b.x-c.x*b.z,c.x*b.y-c.y*b.x)}function cy(g,d,b){var f=this,e=f.cn(g),c=f.cn(d),a=f.cn(b);
return e.ce(c).cb(a)}function cz(h,f,c){var a=this,i=h.cn(a),g=f.cn(a),d=c.cn(a),e=i.cA(g).cA(d),b=[];
b.push(e.ce(i).cp());
b.push(e.ce(g).cp());
b.push(e.ce(d).cp());
return b}function cB(b,c){if(c){return b3(this.cC(c)-this.cC(b))}else{var a=b.x-this.x,d=b.y-this.y;
if(!a&&!d){return 0}return b3(M.atan2(d,a)*ag)}}function cD(d,c){var e=this,b,a;
if(c){d=d.cn(e);
c=c.cn(e)}else{c=e}if((b=d.bd())&&(a=c.bd())){return b3(M.acos(d.cb(c)/b/a)*ag)}}function cE(b,a){return this.cF(b,a)>0}function cG(b,a){var c=b.cH(a,T);
if(c>0){return M.abs(this.cF(b,a))/c}}function cI(b,a){return((a.x-b.x)*(this.y-b.y)-(a.y-b.y)*(this.x-b.x))}function co(b,a){return new b8(0.5*(b.x+a.x),0.5*(b.y+a.y),0.5*(b.z+a.z))}function cJ(c,b,a){return this.x>=M.min(c.x,b.x)-a&&this.x<=M.max(c.x,b.x)+a&&this.y>=M.min(c.y,b.y)-a&&this.y<=M.max(c.y,b.y)+a}function cK(f,e,c){for(var b=F,d=1,a=bd(f);
d<a;
d++){if((((f[d].y<=c)&&(c<f[d-1].y))||((f[d-1].y<=c)&&(c<f[d].y)))&&(e<(f[d-1].x-f[d].x)*(c-f[d].y)/(f[d-1].y-f[d].y)+f[d].x)){b=!b}}return b}function cL(c,b){var a=this;
if(b&&(b.x>a.x||b.x2<a.x||b.y>a.y||b.y2<a.y)){return F}return cK(c,a.x,a.y)}function cM(){return this.x+","+this.y}function cN(b,a){return(this.x+b)+","+(this.y+a)}function cO(){var a=this;
return new b8(a.x,a.y,a.z)}function cP(f,e,b,a){var d=e*af,c=b*af;
return new b8(f.x+a*M.cos(c)*M.cos(d),f.y+a*M.cos(c)*M.sin(d),f.z+a*M.sin(c))}function cQ(c,b,a){return cP(c,b,0,a)}function cR(e,d,c){var a=e.cH(d),b;
if(!a){return new b8()}b=c/a;
return new b8(b*(d.y-e.y),b*(d.x-e.x),0.5*(e.z+d.z))}function cS(e,d,a,c){var b,f;
if(c){b=1-c;
e.x=b*e.x+d.x*c;
e.y=b*e.y+d.y*c;
d.x=b*d.x+e.x*c;
d.y=b*d.y+e.y*c}if(a){f=cR(e,d,a);
e.x+=f.x;
d.x+=f.x;
e.y-=f.y;
d.y-=f.y}}function cT(d,c,b){var a=1;
if(d>c){a+=0.3*(d-c)/(b-c)}if(a<1.02){a=1}return a*a}function cU(n,b,q,l,g,o){var r=this,i=r.cV(),c=r.cW.cX.b1(),a=r.cY.cX.b1(),f=r.cZ(),e,k,p,j,h,m,d;
g=(g||1);
if(f){e=M.max(f.c0.z,0.5*c1);
k=be(e,M.min(f.c2.z,-0.5*c1));
g=M.min(g*cT(a.z,k,e),3.5)*b;
b*=cT(c.z,k,e)}else{g*=b}if(!n[aA]&&(p=(c.cH(a,T)/c3))){l=bu(l)+c4;
cS(c,a,q,l);
j=c5*(a.y-c.y)/p;
h=c5*(a.x-c.x)/p;
d=i.path("M"+c.c6(-j*b,h*b)+"L"+c.c6(j*b,-h*b)+"L"+a.c6(j*g,-h*g)+"L"+a.c6(-j*g,h*g)+"Z");
if(!o){l-=c4+c7;
c=r.cW.cX.b1();
a=r.cY.cX.b1();
cS(c,a,q,l);
j/=c5;
h/=c5;
n[az]=0;
m=i.path("M"+c.c6(-j*b,h*b)+"L"+c.c6(j*b,-h*b)+"L"+a.c6(j*g,-h*g)+"L"+a.c6(-j*g,h*g)+"Z").attr(aD,n[ax])}}else{cS(c,a,q,l);
d=i.path("M"+c+"L"+a);
n[az]=c3*M.min(b,g);
if(!o){m=i.path("M"+c+"L"+a)
}}r.c8.push(d.attr({fill:c9,stroke:c9,"stroke-width":c_*n[az]}));
if(m){r.c8.push(m.attr(n))}}function da(d,c){if(c||st.db||d.dc||d.dd||d.de||d.df!=C||d.dg!=al||!bd(d.dh)){return T}if(bd(d.dh)!=2){return F}for(var b=0,a=bd(d.dh);
b<a;
b++){if(d.dh[b].di!=2){return F}}return T}function dj(a){var c=this,b;
if(c.c8){if(a&&dk(c.c8)){a.insertAfter(c.c8)}c.c8.remove()}else{if(a&&(b=c.getInsertBefore())){a.insertBefore(b)}}c.c8=a}function dl(b){for(var e,d,c=0,a=bd(b);
c<a;
c++){d=b[c].c8;
if(dk(d)){if(e){d.insertAfter(e)}e=d}}}function dm(b){var a;
if(b){if(!(a=b.node)&&bd(b)){a=b[0].node}}return(a&&a.parentNode)}function dk(a){var b;
if(a){if(!(b=a.node)&&bd(a)){b=a[bd(a)-1].node}}return(b&&b.parentNode)}function getInsertBefore(){for(var g=this,c=st.dn(),e=g.dp(),b=c.dq(F),f,d=0,a=bd(b);
d<a;
d++){f=b[d];
if(f.dp()>=e&&dm(f.c8)){return f.c8}}}function dr(){this.c8=al}function ds(){var d=this,c=d.cV(),a=0.5*dt,b=c.path("M-"+a+",0H"+a+"M0,-"+a+"V"+a).attr(ax,d.du?dv:dw).attr(az,dx).transform("t"+d.cX).data(ao,d).mouseover(dy).mouseout(dz);
d.dj(b)}function dA(){var a=this,b=a.cV(),d,e=0.5*dB,i=0.5*(1-dC),h=a.dD.b1(),g=a.dD.b1(),c=a.dE.b1(),j=a.dE.b1(),f=dw;
if(a.dF){f=dG}else{if(a.du){f=dv}}cS(c,h,e,i);
cS(j,g,-e,i);
d=b.path("M"+a.dE+"L"+a.dD+"L"+h+"M"+a.dD+"L,"+g).attr(ax,f).attr(az,dx).data(ao,a).mouseover(dH).mouseout(dI);
a.dj(d);
dJ(a)}function dK(a){a.remove()}function dL(b){var a=this;
if(a.c8){a.c8.forEach(dK);
a.c8.clear()}else{a.c8=b.set()}return a.c8}function dM(){if(!this.dN&&!this.dO&&!this.dP){var N=this,o=N.cZ(),j,u,E,B,k,f,J,g,m,b,D,I,l,t,r,G,z,n,L,A,h,a,w,p,v,q=N.cV(),y={},e=N.cW.cX,d=N.cY.cX,K=be(e.z,d.z),x=dw,c=(N.dc?1.3:1);
if(o){o.dQ();
j=o.c2.z;
u=be(o.c0.z,j)}if(N.dF){x=dG}else{if(N.du){x=dv}}if(N.dc){x=tinycolor.mix(x,"#00f",50)}if(K<u&&j<u){x=tinycolor(x);
y[ax]=x.brighten(0.13*(255-x.getBrightness())*(u-K)/(u-j)).toString()}else{y[ax]=x}N.dL(q);
switch(N.di){case 1.5:case 2:h=0;
a=bd(N.cW.dh);
w=bd(N.cY.dh);
if((a==1||w==1)&&(a>=3||w>=3||a==w)){}else{p=N.dR();
if(bd(p)){f=0;
for(E=0,B=bd(p);
E<B;
E++){A=bd(p[E].dS);
if(!k||A<f){f=A;
k=p[E]}}J=k.dT()}else{J=new b8();
g=0;
for(E=0,B=bd(N.cW.dh);
E<B;
E++){m=N.cW.dh[E];
b=(N.cW.bG(m.cW)?m.cY:m.cW);
if(b.bG(N.cY)){continue}J.x+=b.cX.x;
J.y+=b.cX.y;
g++}for(E=0,B=bd(N.cY.dh);
E<B;
E++){m=N.cY.dh[E];
b=(N.cY.bG(m.cW)?m.cY:m.cW);
if(b.bG(N.cW)){continue}J.x+=b.cX.x;
J.y+=b.cX.y;
g++}if(g){J.x/=g;
J.y/=g}}h=(e.cC(d)-J.cC(d))*af;
if(M.abs(h)>M.PI){h*=-1}}if((h+2*M.PI)%M.PI>0.01||(a==2&&w==2)||(p&&bd(p))){N.dU(y,c);
if(N.di==1.5){y[aA]=[aB]}N.dU(y,c,2*(h>0?-1:1),0.15)}else{N.dU(y,c,-1,-0.05);
if(N.di==1.5){y[aA]=[aB]}N.dU(y,c,1,-0.05)}break;
case 3:N.dU(y,c,-1.5,0.15),N.dU(y,c),N.dU(y,c,1.5,0.15);
break;
default:if(N.dV!=0){J=(N.dV!=1);
N.dU(y,c,0,0,(J?2:4),J)}switch(N.dV){case 1:break;
case 4:y[az]=c3*c;
D=e.cH(d);
l=1.5;
I=2;
if(D){G=0;
I/=D;
t=I*(d.y-e.y);
r=I*(d.x-e.x);
n=0;
v="M"+e;
for(E=0;
E<=D;
E+=l){G++;
n=E/D;
z=(G%2?1:-1);
v+="L"+(e.x*(1-n)+(d.x+t*z)*n)+","+(e.y*(1-n)+(d.y-r*z)*n)}N.c8.push(q.path(v).attr(y))}break;
case 6:y[az]=c3*c;
D=e.cH(d);
l=2;
I=2;
if(D){I/=D;
t=I*(d.y-e.y);
r=I*(d.x-e.x);

v="";
for(E=0;
E<=D;
E+=l){n=E/D;
L=1-n;
v+="M"+(e.x*L+n*(d.x+t))+","+(e.y*L+n*(d.y-r))+"L"+(e.x*L+n*(d.x-t))+","+(e.y*L+n*(d.y+r))}N.c8.push(q.path(v).attr(y))}break;
default:if(N.di==0){y[aA]=[aB]}N.dU(y,c)}}}else{this.dj()}dJ(this)}function dW(a,c){var b=this;
a.dX.attr(aw,16*c).attr(az,c3);
a.bbox=a.dX.getBBox(T);
a.dY=b.dZ.rect(a.bbox.x-a.d0,a.bbox.y-a.d0,a.bbox.width+2*a.d0,a.bbox.height+2*a.d0,1.5).attr(aD,a.c9).attr(az,0).insertBefore(a.dX);
b.d1.push(a.dY,a.dX);
b.d2.push(a)}function d3(b,a){var e=this,d,c;
if(d4){if(b){e.x+=b;
e.dX.node.setAttribute("x",e.x);
e.dY.node.setAttribute("x",e.x-e.d0)}if(a){e.y+=a;
e.dX.node.setAttribute("y",e.y);
e.dY.node.setAttribute("y",e.y-e.d0)}}else{e.x+=bu(b);
e.y+=bu(a);
d=M.round(e.x*ak);
c=M.round(e.y*ak);
e.dX.shape.path=" m"+d+","+c+" l"+(d+1)+","+c+" e"}}function d5(b,h,f,i,e,g,c,d){var a=this;
a.dZ=b;
a.x=h;
a.y=f;
a.c9=g;
a.d0=bu(c);
a.dX=a.dZ.text(h,f,i).attr(ax,e).attr(aD,e).attr(aC,"start");
if(d){a.dX.attr("font-weight","bold")}a.bbox=a.dX.getBBox(T);
a.d6=d3}function d7(){for(var c=this,b=0,a=bd(c.d2);
b<a;
b++){c.d2[b].dX.insertAfter(c.d1)}return this.d1}function d8(c,a){var b=this;
b.dZ=c;
b.d1=a;
b.d2=[];
b.d9=dW;
b.d7=d7}function d_(){if(!this.dO&&!this.dN&&!this.dP){var I=this,v=I.cV(),x=I.cX,z=I.ea(),l,a,j,J=c9,d=I.eb(),t=d.ec,e,b,q,E,f,u,g,r,k,n,y,c,h=0,G=0,D=0,o,w=0.8,B,A,m=I.dc;
if(!v){return}if(t&&ed=="tmpl"&&d.bG(t.ee)){J=ef}if(I.dF){j=dG}else{j=dw}if(m||d.bG(eg)){a=(this.eh?ei:ej)}else{if(I.du){a=dv}}I.dL(v);
if(!da(I,z)){if(a||J!=c9){l=v.rect(x.x-ek*el,x.y-ek*el,2*ek*el,2*ek*el);
if(a){l.attr(ax,a).attr(az,c3)}else{l.attr(az,0)}if(J!=c9){l.attr(aD,(em?"red":J))}I.c8.push(l)}}else{e=new d8(v,I.c8);
b=!!(A=bd(I.dh));
for(B=0;
B<A;
B++){q=I.dh[B];
o=en(q.cW,q.cY)+90;
if(I.bG(q.cY)){o+=ae}o%=aj;
if(o>ae){b=F;
break}}E=new d5(v,0,0,I.df+(st.db?I.getIndex()+1:""),j,J,el,m);
E.dX.attr(aC,"middle");
f=eo*ep/E.bbox.height;
e.d9(E,f);
u=E.bbox.width*0.5;
G-=u;
h-=u;
D+=u;
g=I.eq();
if(g&&!b){r=new d5(v,D,0,H,j,c9,el,m);
e.d9(r,f);
D+=r.bbox.width;
if(g>1){k=new d5(v,D,0.4*E.bbox.height,g,j,c9,el,m);
e.d9(k,f*w)}}if(z||I.dd){n="";
if(M.abs(z)!=1){n+=M.abs(z)}if(z){n+=(z>0?"+":"\u2013")}if(I.dd==1){n+=":"}else{if(I.dd==2){n+="."}else{if(I.dd==3){n+=".."}}}y=new d5(v,D,-0.5*E.bbox.height,n,j,c9,el,m);
e.d9(y,f*w)}if(I.de){c=new d5(v,0,-0.5*E.bbox.height,M.round(I.de),j,c9,el,m);
e.d9(c,f*w);
G-=c.bbox.width;
c.d6(G)}if(g&&b){if(g>1){k=new d5(v,0,0.4*E.bbox.height,g,j,c9,el,m);
e.d9(k,f*w);
h=M.min(G,h-k.bbox.width);
k.d6(h)}r=new d5(v,0,0,H,j,c9,el,m);
e.d9(r,f);
h-=r.bbox.width;
r.d6(h)}I.c8.transform("t"+x);
if(a){I.c8.push(v.rect(x.x+h-el,x.y-E.bbox.height*0.5,D-h+2*el,E.bbox.height).attr(ax,a).attr(az,c3))}}}else{this.dj()}dJ(this)}function er(){if(!this.es&&!this.dP){var b=this,f,d,e,l,j,k={},c=b.cV(),m=new d8(c,b.dL(c)),a,h,g;
if(b.type==aq){a=b.dT();
h=new d5(c,a.x,a.y,b.df,dw,c9,el,(b.du?dv:al));
h.dX.attr(aC,"middle");
g=eo*ep/h.bbox.height;

m.d9(h,g)}else{a=b.et();
k[ax]=(b.du?dv:dw);
k[az]=c3;
for(f=0,d=bd(b.eu);
f<d;
f++){e=b.eu[f];
l=e.dE.b1();
j=e.dD.b1();
cS(l,j,ep*0.4*(a.ev(l,j)?-1:1));
b.c8.push(c.path("M"+l+"L"+e.dE+"L"+e.dD+"L"+j).attr(k))}if(b.df){j=b.ew(3);
h=new d5(c,j.x+ep*0.3,j.y+ep*0.3,b.df,dw,c9,el);
g=eo*ep/h.bbox.height;
m.d9(h,g);
b.c8.push(m.d7())}}if(c==aV){b.c8.click(function(i){b.ex(i);
return ey(i)}).mousedown(ey).mouseup(ez)}}else{this.dj()}dJ(this)}function b8(a,d,c){var b=this;
b.x=bu(a);
b.y=bu(d);
b.z=bu(c);
b.cA=b4;
b.cn=b5;
b.cp=b6;
b.ci=b9;
b.eA=ch;
b.eB=ck;
b.eC=cl;
b.cq=ct;
b.eD=cs;
b.eE=cm;
b.eF=cr;
b.eG=cj;
b.bG=b_;
b.bd=cu;
b.cH=cv;
b.b7=cg;
b.cb=cw;
b.ce=cx;
b.eH=cy;
b.eI=cz;
b.cC=cB;
b.cf=cD;
b.ev=cE;
b.cc=cd;
b.eJ=cG;
b.cF=cI;
b.eK=ca;
b.cJ=cJ;
b.cL=cL;
b.b1=cO;
b.toString=cM;
b.c6=cN}function eL(){var a=this;
bD.apply(a);
a.moveBy=a.ci=eM;
a.rotateBy=a.eB=eN;
a.rotate3D=a.eC=eO;
a.rotateAround=a.eP=eQ;
a.rotateAroundUnit=a.cq=eR;
a.flip=a.eG=eS;
a.getCenter=a.dT=eT;
a.eU=eV;
a.dj=eW;
a.dr=eX}function eY(){var a=this;
bD.apply(a);
a.eb=eZ;
a.dj=dj;
a.dL=dL;
a.dr=dr;
a.getInsertBefore=getInsertBefore}function e0(b,a){if(a){bS(b,a)}b.dP=T;
b.dj();
dJ(b)}function e1(b){for(var c=0,a=bd(b);
c<a;
c++){e0(b[c])}b.length=0}function e2(d,c){var e=d.dp(),f=c.dp();
if(e<f){return -1}if(e>f){return 1}return 0}function e3(c){for(var d=[],b=0,a=bd(c);
b<a;
b++){bY(d,e4(c[b]))}return d}function e4(a){if(!a||a.e5||a.dP){return}var b=a.cV();
if(b){bY(b.e5,a);
a.e5=T}return b}function dJ(a){if(!a||!a.e5){return}var b=a.cV();
if(b){bS(a,b.e5);
a.e5=al}}function e6(){dl(st.dn().dq(F))}function e7(d){var b,a,c;
if($.isArray(d)){for(b=0,a=bd(d);
b<a;
b++){e7(d[b])}}else{while(bd(d.e5)){c=d.e5.pop();
if(c.dP){c.dj()}else{c.e5=al;
c.eU()}}if(c){e6();
d.renderfix()}}}function resetDirty(b){while(bd(b.e5)){var a=b.e5.pop();
a.e5=al}}function e8(){var d=this,c,e,b,a;
if(!d.c2||!d.c0){d.c2=new b8(an,an,an);
d.c0=new b8(-an,-an,-an);
c=d.e9(T);
if(!bd(c)){c=d.e9()}for(b=0,a=bd(c);
b<a;
b++){e=c[b];
e_(d,e.x);
fa(d,e.y);
fb(d,e.z)}}}function e_(b,a){if(a>b.c0.x){b.c0.x=a}if(a<b.c2.x){b.c2.x=a}}function fa(b,a){if(a>b.c0.y){b.c0.y=a}if(a<b.c2.y){b.c2.y=a}}function fb(b,a){if(a>b.c0.z){b.c0.z=a}if(a<b.c2.z){b.c2.z=a}}function eT(){if(!this.fc){var e=this,b=new b8(),d=e.e9(T),c,a;

if(!bd(d)){d=e.e9()}for(c=0,a=bd(d);
c<a;
c++){b.ci(d[c])}if(a>1){b.x/=a;
b.y/=a;
b.z/=a}e.fc=b}return this.fc}function eW(){if(this.c8){dj.apply(this)}for(var c=this.dq(T),b=0,a=bd(c);
b<a;
b++){c[b].dj()}}function eX(){if(this.c8){dr.apply(this)}for(var c=this.dq(T),b=0,a=bd(c);
b<a;
b++){c[b].dr()}}function eV(){var a=e3(this.dq(F));
e7(a)}function eM(c,b,f){for(var e=this.e9(),d=0,a=bd(e);
d<a;
d++){e[d].ci(c,b,f)}this.fd(a8);
e3(this.dq(F))}function eN(f,b){var e,d,a,c,g=this;
if(!b){b=g.dT().b1();
c=T}e=g.e9();
for(d=0,a=bd(e);
d<a;
d++){e[d].eB(f,b)}g.fd((c?a9:ba));
e3(g.dq(F))}function eO(e,d,b){var f,c,a,g=this;
if(!b){b=g.dT().b1()}f=g.e9();
for(c=0,a=bd(f);
c<a;
c++){f[c].eC(e,d,b)}g.fd(ba);
e3(g.dq(F))}function eR(f,c,b){for(var g=this,e=g.e9(),d=0,a=bd(e);
d<a;
d++){e[d].cq(f,c,b)}g.fd(ba);
e3(g.dq(F))}function eQ(e,b,d){var a,c;
if(a=b.cH(d)){c=d.cn(b);
c.eA(1/a);
this.cq(e,c,b)}}function fe(d,b){var e,c,a,f=this;
if(!b){b=f.dT().b1()}e=f.e9();
for(c=0,a=bd(e);
c<a;
c++){e[c].eA(d,b)}f.fd(ba);
e3(f.dq(F))}function eS(c,b){if(!b){b=this.dT()}for(var e=this.e9(),d=0,a=bd(e);
d<a;
d++){e[d].eG(c,b)}this.fd(a8);
e3(this.dq(F))}function ff(){return 0}function fg(){return an}function fh(){return this.cX.z}function fi(a){bS(a,this.fj)}function fk(){var b=this,a;
if(b.ec){for(a=bd(b.ec.dh)-1;
a>=0;
a--){b.fl(b.ec.dh[a])}for(a=bd(b.ec.dS)-1;
a>=0;
a--){b.fm(b.ec.dS[a])}}else{b.ec=new fn()}b.fo=new fp(aV);
b.fo.fq(b.ec);
b.fr=new b2();
b.fr.fs=T}function ft(){var a=this;
return !a.fo||!a.ec||(!a.fo.fu&&!bd(a.ec.dS)&&!bd(a.ec.dh))}function fv(){for(var c=this.fo.dq(F),b=0,a=bd(c);
b<a;
b++){c[b].eU();
aV.fw.push(c[b].c8)}}function fx(c,a){var b=this;
b.fu=new fy(c,a);
b.fu.dF=T;
b.fo.fz(b.fu);
return b.fu}function fA(a){var b=this.fr.b0(a);
fB(b,a);
bN(b.dh,a.dh);
this.ec.fC(b);
return b}function fD(b){var c=b.dN,a=b;
if(!c){c=b;
a=b.fE}e0(c,this.ec.dS);
delete c.dN;
if(a){delete a.e5;
e4(a);
delete a.dN}}function fF(a){var b=this.fr.b0(a);
fB(b,a);
this.ec.fG(b);
return b}function fB(c,a){c.dF=T;
c.fE=a;
var b;
if((b=c.ec)&&a.ec){b.dF=T;
b.fE=a.ec;
if(b=b.fH){b.dF=T;
b.fE=a.ec.fH}}a.dN=c}function fI(b){var c=b.dN,a=b;
if(!c){c=b;
a=b.fE}e0(c,this.ec.dh);
delete c.dN;
if(a){delete a.e5;
e4(a);
delete a.dN}}function fJ(b){for(var d,c=0,a=bd(b.dS);
c<a;
c++){d=this.fC(b.dS[c]);
d.dh=[]}for(c=0,a=bd(b.dh);
c<a;
c++){this.fG(b.dh[c])}}function fK(c){for(var b=0,a=bd(c.fL);
b<a;
b++){this.fq(c.fL[b])}}function fM(){var a=this;
a.fC=fA;
a.fm=fD;
a.fG=fF;
a.fl=fI;

a.fq=fJ;
a.fN=fK;
a.fO=fx;
a.eU=fv;
a.fP=fk;
a.fQ=ft;
a.fP()}function eZ(){return(this.fE?this.fE:this)}fR={H:{fS:1,m:1.00794,v:1,fT:T,fU:1.007825,fV:{1:1.007825,2:2.0141018,3:3.0160493}},D:{fS:1,m:2.01402,v:1,fU:2.014102},T:{fS:1,m:3.0160492,v:1,fU:3.0160492},He:{fS:2,m:4.002602,fU:4.002603,fV:{3:3.0160293,4:4.0026032}},Li:{fS:3,fW:T,m:6.941,fX:7,fU:7.016005,fV:{5:5.0125378,6:6.0151223,7:7.016004}},Be:{fS:4,fW:T,m:9.012182,fX:6,fU:9.012183,fV:{7:7.0169292,9:9.0121821,10:10.0135337}},B:{fS:5,m:10.811,v:3,fX:5,fU:11.009305,fV:{10:10.012937,11:11.0093055}},C:{fS:6,m:12.011,v:4,fT:T,fU:12,fV:{11:11.0114338,12:12,13:13.0033548,14:14.003242}},N:{fS:7,m:14.00674,v:5,fU:14.003074,fV:{13:13.0057386,14:14.003074,15:15.0001089,17:17.0084497}},O:{fS:8,m:15.9994,v:6,fU:15.994915,fV:{14:14.0085953,15:15.0030654,16:15.9949146,17:16.9991315,18:17.9991604,19:19.0035787,20:20.0040761,21:21.0086546}},F:{fS:9,m:18.9984032,v:7,fU:18.998403,fV:{17:17.0020952,18:18.0009377,19:18.9984032,20:19.9999813,21:20.9999489}},Ne:{fS:10,m:20.1797,fU:19.992439,fV:{19:19.0018798,20:19.9924402,21:20.9938467,22:21.9913855,23:22.9944673,24:23.9936151}},Na:{fS:11,fW:T,m:22.989768,fX:7,fU:22.98977,fV:{21:20.9976551,22:21.9944368,23:22.9897697,24:23.9909633,25:24.9899544}},Mg:{fS:12,fW:T,m:24.305,fX:6,fU:23.985045,fV:{22:21.9995741,23:22.9941248,24:23.9850419,25:24.985837,26:25.982593,27:26.9843407,28:27.9838767}},Al:{fS:13,fW:T,m:26.9811539,fX:5,fU:26.981541,fV:{25:24.9904286,26:25.9868917,27:26.9815384,28:27.9819102,29:28.9804448}},Si:{fS:14,m:28.0855,v:4,fU:27.976928,fV:{27:26.9867048,28:27.9769265,29:28.9764947,30:29.9737702,31:30.9753633,32:31.9741481}},P:{fS:15,m:30.973762,v:5,fU:30.973763,fV:{29:28.9818014,30:29.9783138,31:30.9737615,32:31.9739072,33:32.9717253,34:33.9736364}},S:{fS:16,m:32.066,v:6,fU:31.972072,fV:{31:30.9795544,32:31.9720707,33:32.9714585,34:33.9678668,35:34.9690321,36:35.9670809,37:36.9711257,38:37.9711634,39:38.9751353}},Cl:{fS:17,m:35.4527,v:7,fU:34.968853,fV:{33:32.9774518,34:33.973762,35:34.9688527,36:35.9683069,37:36.9659026,38:37.9680106,39:38.9680077,40:39.9704156,41:40.9706502}},Ar:{fS:18,m:39.948,fU:39.962383,fV:{36:35.9675463,37:36.9667759,38:37.9627322,39:38.9643134,40:39.9623831,41:40.9645008,42:41.9630464,43:42.9656707,44:43.9653653,45:44.968095}},K:{fS:19,fW:T,m:39.0983,fX:17,fU:38.963708,fV:{38:37.9690801,39:38.9637069,40:39.9639987,41:40.961826,42:41.9624031,43:42.9607157,44:43.9615561,45:44.9606997,46:45.9619762}},Ca:{fS:20,fW:T,m:40.078,fX:16,fU:39.962591,fV:{40:39.9625912,41:40.9622783,42:41.9586183,43:42.9587668,44:43.9554811,45:44.9561859,46:45.9536928,47:46.9545465,48:47.9525335,49:48.9556733}},Sc:{fS:21,fW:T,m:44.95591,fX:15,fU:44.955914,fV:{43:42.961151,44:43.959403,45:44.9559102,46:45.9551703,47:46.952408,48:47.952235,49:48.9500241}},Ti:{fS:22,fW:T,m:47.867,fX:14,fU:47.947947,fV:{44:43.9596902,45:44.9581243,46:45.9526295,47:46.9517638,48:47.9479471,49:48.9478708,50:49.9447921,51:50.946616,52:51.9468982}},V:{fS:23,fW:T,m:50.9415,fX:13,fU:50.943963,fV:{47:46.9549069,48:47.9522545,49:48.9485169,50:49.9471628,51:50.9439637,52:51.9447797,53:52.9443425}},Cr:{fS:24,fW:T,m:51.9961,fX:12,fU:51.94051,fV:{48:47.9540359,49:48.9513411,50:49.9460496,51:50.9447718,52:51.9405119,53:52.9406538,54:53.9388849,55:54.9408442,56:55.9406452}},Mn:{fS:25,fW:T,m:54.93805,fX:11,fU:54.938046,fV:{51:50.9482155,52:51.9455701,53:52.9412947,54:53.9403632,55:54.9380496,56:55.9389094,57:56.9382875}},Fe:{fS:26,fW:T,m:55.845,fX:10,fU:55.934939,fV:{52:51.9481165,53:52.9453123,54:53.9396148,55:54.938298,56:55.9349421,57:56.9353987,58:57.9332805,59:58.9348805,60:59.9340769,61:60.9367495}},Co:{fS:27,fW:T,m:58.9332,fX:9,fU:58.933198,fV:{55:54.9420031,56:55.9398439,57:56.9362962,58:57.9357576,59:58.9332002,60:59.9338222,61:60.9324794,62:61.9340542}},Ni:{fS:28,fW:T,m:58.6934,fX:10,fU:57.935347,fV:{56:55.9421363,57:56.9398005,58:57.9353479,59:58.9343516,60:59.9307906,61:60.9310604,62:61.9283488,63:62.9296729,64:63.9279696,65:64.930088,66:65.9291152}},Cu:{fS:29,fW:T,m:63.546,fX:7,fU:62.929599},Zn:{fS:30,fW:T,m:65.39,fX:6,fU:63.929145},Ga:{fS:31,m:69.723,fX:5,fU:68.925581},Ge:{fS:32,m:72.61,fU:73.921179},As:{fS:33,m:74.92159,fU:74.921596},Se:{fS:34,m:78.96,fU:79.916521},Br:{fS:35,m:79.904,v:7,fU:78.918336},Kr:{fS:36,m:83.8,fU:83.911506},Rb:{fS:37,fW:T,m:85.4678,fX:17,fU:84.9118},Sr:{fS:38,fW:T,m:87.62,fX:16,fU:87.905625},Y:{fS:39,fW:T,m:88.90585,fX:15,fU:88.905856},Zr:{fS:40,fW:T,m:91.224,fX:14,fU:89.904708},Nb:{fS:41,fW:T,m:92.90638,fX:13,fU:92.906378},Mo:{fS:42,fW:T,m:95.94,fX:12,fU:97.905405},Tc:{fS:43,fW:T,m:97.9072,fX:11},Ru:{fS:44,fW:T,m:101.07,fX:10,fU:101.904348},Rh:{fS:45,fW:T,m:102.9055,fX:9,fU:102.905503},Pd:{fS:46,fW:T,m:106.42,fX:8,fU:105.903475},Ag:{fS:47,fW:T,m:107.8682,fX:7,fU:106.905095},Cd:{fS:48,fW:T,m:112.411,fX:6,fU:113.903361},In:{fS:49,fW:T,m:114.818,fX:5,fU:114.903875},Sn:{fS:50,fW:T,m:118.71,fU:119.902199},Sb:{fS:51,m:121.76,fU:120.903824},Te:{fS:52,m:127.6,fU:129.906229},I:{fS:53,m:126.90447,v:7,fU:126.904477},Xe:{fS:54,m:131.29,fU:131.904148},Cs:{fS:55,fW:T,m:132.90543,fX:17,fU:132.905433},Ba:{fS:56,fW:T,m:137.327,fX:16,fU:137.905236},La:{fS:57,fW:T,m:138.9055,fX:15,fU:138.906355},Ce:{fS:58,fW:T,m:140.115,fX:15,fU:139.905442},Pr:{fS:59,fW:T,m:140.90765,fX:15,fU:140.907657},Nd:{fS:60,fW:T,m:144.24,fX:15,fU:141.907731},Pm:{fS:61,fW:T,m:144.9127,fX:15},Sm:{fS:62,fW:T,m:150.36,fX:15,fU:151.919741},Eu:{fS:63,fW:T,m:151.965,fX:15,fU:152.921243},Gd:{fS:64,fW:T,m:157.25,fX:15,fU:157.924111},Tb:{fS:65,fW:T,m:158.92534,fX:15,fU:158.92535},Dy:{fS:66,fW:T,m:162.5,fX:15,fU:163.929183},Ho:{fS:67,fW:T,m:164.93032,fX:15,fU:164.930332},Er:{fS:68,fW:T,m:167.26,fX:15,fU:165.930305},Tm:{fS:69,fW:T,m:168.9342,fX:15,fU:168.934225},Yb:{fS:70,fW:T,m:173.04,fX:15,fU:173.938873},Lu:{fS:71,fW:T,m:174.967,fX:15,fU:174.940785},Hf:{fS:72,fW:T,m:178.49,fX:14,fU:179.946561},Ta:{fS:73,fW:T,m:180.9479,fX:13,fU:180.948014},W:{fS:74,fW:T,m:183.84,fX:12,fU:183.950953},Re:{fS:75,fW:T,m:186.207,fX:11,fU:186.955765},Os:{fS:76,fW:T,m:190.23,fX:10,fU:191.961487},Ir:{fS:77,fW:T,m:192.217,fX:9,fU:192.962942},Pt:{fS:78,fW:T,m:195.08,fX:8,fU:194.964785},Au:{fS:79,fW:T,m:196.96654,fX:7,fU:196.96656},Hg:{fS:80,fW:T,m:200.59,fX:6,fU:201.970632},Tl:{fS:81,fW:T,m:204.3833,fX:5,fU:204.97441},Pb:{fS:82,fW:T,m:207.2,fX:4,fU:207.976641},Bi:{fS:83,fW:T,m:208.98037,fX:3,fU:208.980388},Po:{fS:84,fW:T,m:208.9824},At:{fS:85,m:209.9871},Rn:{fS:86,m:222.0176},Fr:{fS:87,fW:T,m:223.0197},Ra:{fS:88,fW:T,m:226.0254},Ac:{fS:89,fW:T,m:227.0278},Th:{fS:90,fW:T,m:232.0381,fU:232.038054},Pa:{fS:91,fW:T,m:231.03588},U:{fS:92,fW:T,m:238.0289,fU:238.050786},Np:{fS:93,fW:T,m:237.0482},Pu:{fS:94,fW:T,m:244.0642},Am:{fS:95,fW:T,m:243.0614},Cm:{fS:96,fW:T,m:247.0703},Bk:{fS:97,fW:T,m:247.0703},Cf:{fS:98,fW:T,m:251.0796},Es:{fS:99,fW:T,m:252.083},Fm:{fS:100,fW:T,m:257.0915},Md:{fS:101,fW:T,m:256.094},No:{fS:102,fW:T,m:259.1009},Lr:{fS:103,fW:T,m:262.11},Rf:{fS:104,fW:T,m:261.11},Db:{fS:105,fW:T,m:268},Sg:{fS:106,fW:T,m:271},Bh:{fS:107,fW:T,m:270},Hs:{fS:108,fW:T,m:277},Mt:{fS:109,fW:T,m:276},Ds:{fS:110,fW:T,m:281},Rg:{fS:111,fW:T,m:272},Cn:{fS:112,fW:T},"%":{fY:T},M:{fY:T},X:{fY:T},Ln:{fY:T}};

function fZ(){if(!this.ec){return -1}return bM(this.ec.dS,this)}function f0(a){return bo(round(a/ep,4,3),10)}function f1(){var c=0,e=this,b=bo("0",3),d=(e.dg!=al?e.dg+1:0),a=e.f2();
if(e.de){c=M.round(e.de-e.f3.m);
if(c<-3||c>4){c=0}}if(e.f3&&a==e.f3.v){a=0}else{if(a==0){a=15}}return"\n"+f0(e.cX.x)+f0(-e.cX.y)+f0(e.cX.z)+S+bq(e.df,3,S)+bo(c,2)+bo(M.round(bu(e.f4)),3)+b+bo(d,3)+b+bo(a,3)+bn(b,6)}function f5(a){if(a){a=a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}this.df=a;
this.f6=al;
this.f3=fR[a]}function f7(b){if(!b){return}var e=0,d,a,g,f;
for(d=0,a=bd(b);
d<a;
d++){g=b.charAt(d);
if(g=="+"){e++}else{if(g=="-"){e--}}}f=bw(b);
if(f===""){return e}return f*e}function f8(b){if(b==H){return 1}if(b){if(b.charAt(0)==H){var a=bc(b.substr(1));
if(!isNaN(a)){return a}}}return al}function f9(p,r){var w=this,e,m,b,v,n,f,u,d,g,j,q,o,h=0,a=0,t,k,l=w.eh;
if(l&&l.type==ar){return}if(!r&&(e=f_(p))){if(l){return}m=w.ec;
b=m.fH;
v=w;
n=1;
u=e.ga();
d=u.ec;
if(bd(w.dh)>1){if(bd(u.dh)>1){v=new gb(gc(w.eb(),1));
if(w.dF){v=gd.fC(v)}f=new ge(w,v,1,0);
if(w.dF){f=gd.fG(f)}else{m.fC(v);
m.fG(f)}}else{n=2;
f=u.dh[0]}}else{f=w.dh[0]}d.ci(v.cX.cn(u.cX));
if(f){g=en(f.cW,f.cY)+((f.cY.bG(v)||f.cY.bG(v.fE))?ae:0)-u.gf(1);
d.eB(g*af,v.cX)}if(w.dF){d.ee=al;
gd.fq(d);
u=u.dN}else{b.gg(m,d);
if(w.du){st.gh().fq(d)}}if(n==2){m.gi(u,v)}else{m.gi(v,u)}}else{w.dd=0;
j="";
for(q=0,o=bd(p);
q<o;
q++){t=p.charAt(q);
if(t=="."){h++}else{if(t==":"){a++}else{j+=t}}}if(a==1){w.dd=1}else{if(h>0){w.dd=h+1}}if(k=a6.exec(j)){w.de=bt(bc(k[1]),0);
w.gj(k[2]);
w.dg=f8(k[3]);
w.f4=f7(k[4])}w.fd(bb)}}function gk(b){var c,f,d,a,e;
if(c=this.f3){if(a=this.de){if((f=c.fV)&&(f=f[a])){return f}e=c.fS;
f=a-e;
d=15.67*a-17.23*M.pow(a,2/3)-0.714*e*(e-1)*M.pow(a,-1/3)-23.2875*M.pow(f-e,2)/a;
if(!(a%2)){d+=11.2*M.pow(a,-0.5)*(e%2?-1:1)}return(939.553*f+938.259*e-d)/931.494061}else{return(b?c.fU:c.m)}}}function gl(b,a){this.gm=a;
this.cC=en(b,a)}function gn(d,c){if(d.cC<c.cC){return -1}if(d.cC>c.cC){return 1}return 0}function go(l,o){var k=(o?o.concat():[]),m,f=this.eb(),a=bd(f.dh),p,q,c,e,b,d,n,h=0,g;
for(c=0;
c<a;
c++){p=f.dh[c];
q=(p.cW.bG(f)?p.cY:p.cW);
k.push(new gl(f,q))}a=bd(k);
k.sort(gn);
if(l){m=f.cX.cC(l);
for(c=0;
c<a;
c++){b=(c+1)%a;
e=k[c].cC;
d=(k[b].cC+aj)%aj;
if(b==0&&(m<d||e<m)){m=0.5*(e+d+aj);
break}else{if(e<m&&m<d){m=0.5*(e+d);
break}}}}else{for(c=0;
c<a;
c++){b=(c+1)%a;
n=(720+k[b].cC-k[c].cC)%aj;
if(n>h){h=n;
g=c}}m=k[g].cC+0.5*h}return m}function gp(){var c=this.eb(),e,a,b,d=c.cX,f=d.z;
for(b=bd(c.dh)-1;
b>=0;
b--){e=c.dh[b];
a=(e.cW.bG(c)?e.cY:e.cW);
if(M.abs(a.cX.z-f)>0.05*d.cH(a.cX)){return F}}return T}function gq(b){var e=this,d=bd(e.dh),a,c;
if(b){if(d==2){for(c=0;
c<d;
c++){a=e.dh[c].gr(e);
if(!a.bG(b)){return a}}}}else{if(d==1){return e.dh[0].gr(e)}}return al}function gs(g,e){var f,d=this.eb(),c=bd(d.dh),h,i,b,a;
if(!c){if(e){f=d.cX.cC(e)}else{f=-30}}else{if(c==1){h=d.dh[0];
i=d.gt();
if(g+h.di==4){f=en(d,i)+ae}else{if(e){f=en(d,i);
f+=M.round((d.cX.cC(e)-f+720)/60)*60}else{b=i.gt(d);
if(b){a=(en(i,d,b)+ae)%aj}f=en(d,i)+ad*(a<ae?1:-1)
}}}else{f=d.gu(e)}}return f}function gv(){for(var b=0,c=0,a=bd(this.dh);
c<a;
c++){b+=this.dh[c].di}return b}function gw(b){if(b){var c=this,a=c.ea();
c.f4=a+b;
c.fd(bb);
e4(c)}}function gx(){var b=this,a=$.inArray(b.dd,av);
a++;
a%=bd(av);
b.dd=av[a];
b.fd(bb);
e4(b)}function gy(c,a){var b=this;
if(!a){a=[]}else{if(bL(a,b)){return}}a.push(b);
b.z=al;
if(c>ba){b.gz=al;
b.gA=al}a.pop()}function gB(){if(this.f6==al){if(!this.f3){return}return this.f3.v}else{return this.f6}}function gC(a){if(a==al){return an}var d=this,c=d.gv(),b;
if(d.dd==1||d.dd==3){c+=2}else{if(d.dd==2){c++}}b=bu(d.f4);
return(a-b<4?a-c-M.abs(b):8-a-c+b)}function gD(){var d=this,b=d.f2(),c,a;
if(b==al){d.gA=0;
d.gz=0}else{a=d.dg;
if(a==al){a=d.gz=d.gE(b)}if(a<0){d.gz=0;
c=d.f3.fS;
if(c==5){d.gA=a}else{if(c>10){if(a<8-2*b){a=8-2*b-a}else{a%=2}}d.gA=-a}}else{d.gA=0}if(d.gz>4||d.gz>b+1){d.gz=0}}}function gF(){var a=this;
if(a.dg!=al){return a.dg}if(a.gz==al){a.gG()}return a.gz}function gH(){var a=this;
if(a.f4!=al){return a.f4}if(a.gA==al){a.gG()}return a.gA}function gI(b){if(this.fE){return this.fE.b1(b)}if(!b){b=new b2()}var c=this,a=new gb(c.cX.b1());
bH(b,c,a);
a.gj(c.df);
a.dg=c.dg;
a.dO=c.dO;
a.f4=c.f4;
a.dd=c.dd;
a.de=c.de;
a.f6=c.f6;
a.eh=b.b0(c.eh);
a.du=c.du;
a.dF=c.dF;
return a}function gJ(){var b=this,a=0;
if(b.df!=C){a+=2}if(b.de){a+=3}if(b.dd){a+=3}if(b.f4){a+=2}return a}function gK(){if(st.gL||st.gM()){return}var c=this,b,a,d;
gd.fP();
switch(gN){case aG:b=gd.fC(c);
b.f9(gO());
gd.eU();
break;
case aH:case aI:if(!gP&&!gQ){d=gc(c,gR);
b=gd.fC(c);
a=gd.fC(new gb(d));
gd.fG(new ge(b,a,gR,gS));
a.f9(gO());
gd.eU()}break;
case aP:if(gP){c.ec.fm(c)}break}}function gT(){gd.fP()}function cV(){if(this.dZ){return this.dZ}if(this.ec){return this.ec.cV()}}function gU(d){if(d){for(var e,b=this.ec,c=0,a=bd(this.dh);
c<a;
c++){e=this.dh[c];
if((e.cW.bG(d)||e.cY.bG(d))&&(!b||bL(b.dh,e))){return e}}}}function gV(){return this.cX}function gW(a){if(!a||!this.dO){return[this.cX]}return[]}function gX(d,c){if(this.bG(d)){return}if(c){if(bL(c.dS,this)){return c}}else{c=new gY(T)}c.fC(this);
for(var b=0,a=bd(this.dh);
b<a;
b++){this.dh[b].gZ(d,c)}return c}function g0(){if(!this.g1){this.g1=[];
var b=this.ec.dR(),c,a;
for(c=0,a=bd(b);
c<a;
c++){if(bL(b[c].dS,this)){this.g1.push(b[c])}}}return this.g1}function g2(){if(this.z==al){for(var d=this,b=d.cX.z,c=0,a=bd(d.dh);
c<a;
c++){b=M.max(d.dh[c].dp(),b)}d.z=b+0.000001}return this.z}function gb(b){var a=this;
eY.apply(a);
a.df=C;
a.dh=[];
a.dO=F;
a.dd=0;
a.de=0;
a.cX=b;
a.du=F;
a.dT=gV;
a.e9=gW;
a.g3=gU;
a.dR=g0;
a.f9=f9;
a.gj=f5;
a.getIndex=fZ;
a.gu=go;
a.g4=gp;
a.gt=gq;
a.gf=gs;

a.f2=gB;
a.gE=gC;
a.gv=gv;
a.g5=gw;
a.g6=gx;
a.fd=gy;
a.gG=gD;
a.eq=gF;
a.ea=gH;
a.g7=gk;
a.g8=gJ;
a.gZ=gX;
a.getMolecule=g9;
a.g_=f1;
a.eU=d_;
a.dp=g2;
a.b1=gI;
a.cV=cV;
a.ha=gK;
a.hb=gT}function hc(d){if(!d){d=new b2()}var e=this,b=new e.constructor(),c,a;
bH(d,e,b);
for(c=0,a=bd(e.dh);
c<a;
c++){e.dh[c].b1(d)}for(c=0,a=bd(e.hd);
c<a;
c++){e.hd[c].b1(d)}for(c=0,a=bd(e.dS);
c<a;
c++){b.fC(d.b0(e.dS[c]),T)}for(c=0,a=bd(e.he);
c<a;
c++){b.hf(d.b0(e.he[c]),T)}for(c=0,a=bd(e.dh);
c<a;
c++){b.fG(d.b0(e.dh[c]),T)}for(c=0,a=bd(e.hd);
c<a;
c++){b.hg(d.b0(e.hd[c]),T)}b.df=e.df;
b.hh=e.hh;
if(e.eu){for(c=0,a=bd(e.eu);
c<a;
c++){b.eu.push(e.eu[c].b1())}}b.hi=e.hi;
b.es=e.es;
return b}function hj(d){for(var c=this,b=0,a=bd(c.dS);
b<a;
b++){c.dS[b].dO=d}for(b=0,a=bd(c.dh);
b<a;
b++){c.dh[b].dO=d}for(b=0,a=bd(c.hd);
b<a;
b++){c.hd[b].dO=al}c.es=!d;
e3(c.dS);
e3(c.dh);
e3(c.hd)}function hk(){for(var d=this,c,b=0,a=bd(d.dS);
b<a;
b++){d.dS[b].dO=T}for(b=0,a=bd(d.he);
b<a;
b++){d.he[b].dO=al}for(b=0,a=bd(d.dh);
b<a;
b++){c=d.dh[b];
c.dO=(c.cW.dO||c.cY.dO)&&!d.hl(c)}d.es=F;
e3(d.dS);
e3(d.dh);
e3(d.hd)}function hm(){for(var c=this,b=0,a=bd(c.dS);
b<a;
b++){c.dS[b].dO=al}for(b=0,a=bd(c.dh);
b<a;
b++){c.dh[b].dO=al}c.es=al;
e3(c.dS);
e3(c.dh);
e3(c.hd)}function hn(b){var a=bY(this.dS,b);
if(a){b.eh=this}return a}function ho(a){if(this.type!=as){return bY(this.he,a)}return F}function hp(a){return bL(this.hd,a)}function hq(b){if(bL(this.hd,b)){return F}var a=bY(this.dh,b);
if(a){b.eh=this}return a}function hr(c,b,a,d){if(bL(a,c[b].cW)){d[2*b]=c[b].cW;
d[2*b+1]=c[b].cY}else{d[2*b]=c[b].cY;
d[2*b+1]=c[b].cW}}function createGroup(){var d=st.gh(),b,c,a;
if(!d.hs){return}a=d.dS[0].ec;
ht(T);
if(bd(d.hd)<=1){c=prompt(s("supaQ"),"")}else{c=prompt(s("multQ"),"")}ht(F);
if(c==null){return}hu();
b=a.hv(c,d.dS,d.dh,d.hd);
d.hw(b);
b.eU();
hx(aV);
return b}function hy(c){for(var e,f,g,b,d=0,a=bd(this.eu);
d<a;
d++){g=this.eu[d].dE;
b=g.x+c*g.y;
if(e==al||b>f){e=g;
f=b}g=this.eu[d].dD;
b=g.x+c*g.y;
if(b>f){e=g;
f=b}}return e}function hz(a){var d=a.dT(),h=d.b1(),g=d.b1(),f=a.cW.cX,e=a.cY.cX,c=hA*(e.x-f.x),b=hA*(e.y-f.y);
h.ci(b,-c);
g.ci(-b,c);
this.eu.push(new hB(h,g))}function hC(){this.eu=[];
for(var b=0,a=bd(this.hd);
b<a;
b++){this.hD(this.hd[b])}}function hE(b){if($.isArray(b)){for(var c=0,a=bd(b);
c<a;
c++){this.hg(b[c])}}else{if(this.type!=ar){if(bL(this.dS,b.cW)){this.hf(b.cW)}else{if(bL(this.dS,b.cY)){this.hf(b.cY)}}}bS(b,this.dh);
bY(this.hd,b)}}function hF(d){var e=this,b=[],c=0,a=bd(e.he);

if(d&&!e.es&&a){for(;
c<a;
c++){b.push(e.he[c].cX)}}else{for(a=bd(e.dS);
c<a;
c++){b.push(e.dS[c].cX)}}if(e.eu){for(c=0,a=bd(e.eu);
c<a;
c++){b.push(e.eu[c].dE,e.eu[c].dD)}}bO(b,e.fc);
return b}function hG(){var a=this;
if(!a.c2||!a.c0){e8.apply(a);
a.c2.x-=hH;
a.c2.y-=hH;
a.c0.x+=hH;
a.c0.y+=hH}}function hI(){if(st.gM()){return}switch(gN){case aP:if(gP){this.ec.hJ(this);
break}default:var a=this,d,c,b=a.cV(),f=[],j,h,g=0,e=(d4?1:1/hK);
a.dQ();
a.hL=0;
hM(b.hN);
j=b.set();
j.push(b.text(2,2,"Ph").attr(aw,2).attr("fill-opacity",0.8),b.path("M2,2L4,2L5,3.5L4,5L2,5L1,3.5Z M2.5,2.5L4,2.5 M4.5,3.5L3.5,4.75 M2.5,4.75L1.5,3.5").attr(ax,"#f00").attr(az,c3).attr(ay,0.85),b.path("M1,0L2,2").attr(ax,hO).attr(az,c3));
f.push(j.transform("t"+(a.c0.x)+","+(a.c2.y+g)).data(ao,a).mousedown(ey).mouseup(ez).click(hP));
h=j.getBBox();
a.hL+=h.width*1.5*e;
g+=h.height*1.3*e;
if(a.type==aq){f.push(b.path(a.es?"M0,4H4L2,2.5Z M0,0H4L2,1.5Z":"M0,1.5H4L2,0Z M0,2.5H4L2,4Z").transform("t"+(a.c0.x+e)+","+(a.c2.y+g)).attr(ax,hO).attr(az,c3).attr(aD,"silver").data(ao,a).mousedown(ey).mouseup(ez).click(hQ))}b.hN.push(b.rect(a.c2.x,a.c2.y,a.c0.x+a.hL-a.c2.x,a.c0.y-a.c2.y).attr(hR).attr(ay,0.85).data(ao,a).mouseout(hS));
for(d=0,c=bd(f);
d<c;
d++){b.hN.push(f[d])}b.hN.insertAfter(b.hT)}}function hQ(c,a,d,b){if(!b){b=this.data(ao)}hu();
b.hU(b.es);
b.ec.fd(ba);
hV=al;
hW(aV);
hX(T);
b.eU();
hx(aV);
return ey(c)}function hY(h){var c=this,g=c.ec,b=bv(c.df),f,i,l,j,d=st.gh(),a,k;
ht(T);
if(c.type==aq){b=prompt(s("supaQ"),b)}else{b=prompt(s("multQ"),b)}ht(F);
if(b==null){return}k=bc(b);
hu();
if(c.type==ar||(c.type==as&&k<hZ&&k>1)){if(c.type==ar){f=c.he.concat()}else{f=c.dS.concat()}i=c.dh.concat();
l=c.hd.concat();
if(j=c.du){d.hJ(c)}c.h0(l,i);
a=g.hv(b,f,i,l);
if(j){d.hw(a)}a.eU()}else{c.df=b;
c.hh=k;
c.eU()}hx(aV)}function hP(c,a,d,b){if(!b){b=this.data(ao)}hu();
b.h0();
hx(aV);
return ey(c)}function hS(){}function h1(j,b,g){var e=j[bd(j)-1],d=0,c=bd(e.dh),h,f,a;
for(;
d<c;
d++){h=e.dh[d];
f=(h.cW.bG(e)?h.cY:h.cW);
if(bL(j,f)){continue}if(h.bG(b)){return h}if(bL(g,f)){j.push(f);
a=h1(j,b,g);
if(a){return a}j.pop()}}}function h2(p,m){var c=this,k=c.ec,o,n,h,f,e,b,g,a,d=st.gh(),l;
if(c.type==ar){o=c.he;
n=bW(c.dS,o);
if(!p){p=c.hd.concat()}if((b=bd(p))==2){for(e=0;
e<b;
e++){for(h=0,f=bd(o);
h<f;
h++){a=o[h];
g=h1([a],p[e],n);
if(!g){continue}l=g.du;
k.fl(g,T);
if(bL(n,g.cW)){g.cW=a}else{g.cY=a}a.dh.push(g);
g.eh=al;
k.fG(g);
if(m){m.push(g)}if(l){d.fG(g)}}}for(h=0,f=bd(n);
h<f;
h++){k.fm(n[h],T)}}}if(c.bG(hV)){hV=al;
hW(aV)}c.dj();
while(bd(c.dS)){g=c.dS.pop();
g.eh=al;
g.dO=al;
e4(g)}while(bd(c.dh)){g=c.dh.pop();
g.eh=al;
g.dO=al;
e4(g)}c.he=[];
e0(c,c.h3.h4);
e0(c,k.h4);
d.hJ(c);
if(m){bP(m,k.dh);
bQ(m,p)}}function h5(){if(!this.ec){return -1}return bM(this.ec.h4,this)
}function h6(b){for(var a=bd(b)-1;
a>=0;
a--){b[a]=parseFloat(b[a])}this.eu.push(new hB(new b8(b[0],-b[1]),new b8(b[2],-b[3])))}function h7(){if(!this.h8){var b=new b8(),d,c,a=bd(this.eu);
if(a>1){for(c=0;
c<a;
c++){d=this.eu[c];
b.ci(d.dE);
b.ci(d.dD)}b.x/=a*2;
b.y/=a*2}this.h8=b}return this.h8}function h9(){return new hB(this.dE.b1(),this.dD.b1())}function hB(b,a){this.dE=b;
this.dD=a;
this.b1=h9}function h_(e,b){if(!b){b=[]}else{if(bL(b,this)){return}}b.push(this);
var d=this,c,a;
if(e==ba){d.fc=al;
d.h8=al}if(e>a8&&e<bb){d.c2=al;
d.c0=al;
for(c=0,a=bd(d.hd);
c<a;
c++){d.hd[c].fd(ba,b)}d.ia()}if(e!=a8){e=ba}for(c=0,a=bd(d.dS);
c<a;
c++){d.dS[c].fd(e,b)}for(c=0,a=bd(d.dh);
c<a;
c++){d.dh[c].fd(e,b)}b.pop()}function ib(){var a=this;
eY.apply(a);
a.dS=[];
a.he=[];
a.dh=[];
a.hd=[];
a.hL=0;
a.getIndex=h5;
a.fd=h_;
a.h0=h2;
a.fC=hn;
a.hf=ho;
a.hl=hp;
a.fG=hq;
a.hg=hE;
a.dT=eT;
a.dQ=hG;
a.e9=hF;
a.b1=hc;
a.cV=cV;
a.ha=hI;
a.hb=hS;
a.ex=hY;
a.eU=er;
a.dp=fg}function ic(){ib.apply(this);
this.type=aq;
this.ia=ie;
this.hU=hj}function ig(){var a=this;
ib.apply(a);
a.type=ar;
a.eu=[];
a.ew=hy;
a.ih=h6;
a.hD=hz;
a.ia=hC;
a.et=h7;
a.hU=hk}function ii(){ig.apply(this);
this.type=as;
this.hU=hm}function ij(e){if(this.fE){return this.fE.b1(e)}if(!e){e=new b2()}var f=this,d,c,a,b;
if(e.fs){if(d=f.cW.dN){c=d}if(d=f.cY.dN){a=d}}if(!c){c=e.b0(f.cW)}if(!a){a=e.b0(f.cY)}b=new ge(c,a,f.di,f.dV);
bH(e,f,b);
b.dO=f.dO;
b.eh=e.b0(f.eh);
b.du=f.du;
return b}function ik(){if(!this.fc){this.fc=co(this.cW.cX,this.cY.cX)}return this.fc}function il(f,c){if(!c){c=[]}else{if(bL(c,this)){return}}c.push(this);
if(f==ba){this.fc=al}if(f<bb){var b=this.ec,d,a,e;
if(b){for(d=0,a=bd(b.h4);
d<a;
d++){e=b.h4[d];
if(bL(e.hd,this)){e.fd(ba,c)}}}}c.pop()}function im(){var b=this,a=b.di;
a=(bg(a7,a)||a);
if(!b.cW||!b.cY||b.cW.bG(b.cY)){return""}return"\n"+bo(b.cW.getIndex()+1,3)+bo(b.cY.getIndex()+1,3)+bo(a,3)+bo(b.dV,3)+bn(bo("0",3),3)}function io(){if(!this.g1){var d=this,c,b,a;
if(!d.cW.h3){d.ec.ip(T)}c=d.cW.h3.dR();
d.g1=[];
for(b=0,a=bd(c);
b<a;
b++){if(bL(c[b].dh,d)){d.g1.push(c[b])}}}return this.g1}function iq(){var a=0;
if(this.dV){a+=4}switch(this.di){case 2:a+=2;
break;
case 3:a--;
break}return a}function ir(b){for(var d,c=0,a=bd(b.dh);
c<a;
c++){d=b.dh[c];
if(d.di==1){d.di=2}else{d.di=1}e4(d)}}function it(){if(this.di>2){return}var k=this.dR(),l,h=[],d,a,g,f,e,c,b;
for(g=0,f=bd(k);
g<f;
g++){d=k[g];
a=bd(d.dh);
if(a%4==2){l=F;
for(e=1;
e<a;
e++){b=d.dh[e].di;
c=d.dh[e-1].di;
if(c+b!=3||c<1||c>2||b<1||b>2){l=T;
break}}if(!l){h.push(d)}}}if(!bd(h)){return}d=h[0];
a=bd(d.dh);

for(g=1,f=bd(h);
g<f;
g++){if(bd(h[g].dh)<a){d=h[g];
a=bd(d.dh)}}return d}function iu(e,d){if(d){var a=3*el,c=e.cH(d.cW.cX,T),b=e.cH(d.cY.cX,T);
if(c<a&&c<b){return d.cW}else{if(b<a){return d.cY}}}return al}function iv(b){var c=this,a;
if(c.eh&&c.eh.type==ar){return}if(gS!=0&&gS==c.dV){a=c.cW;
c.cW=c.cY;
c.cY=a}else{if(gS!=0||gR!=1){c.di=gR;
c.dV=gS}else{if(c.dV!=0){c.dV=0}else{c.di%=3;
c.di++}}}c.cW.fd(bb);
c.cY.fd(bb);
if(!b){e4(c);
e4(c.cW);
e4(c.cY)}}function iw(){if(!this.ec){return -1}return bM(this.ec.dh,this)}function ix(a){if(!a||!this.dO){return[this.cW.cX,this.cY.cX]}return[]}function iy(b,a){if(a){if(bL(a.dh,this)){return a}}else{a=new gY(T)}a.fG(this);
this.cW.gZ(b,a);
this.cY.gZ(b,a);
return a}function iz(){var b=this,a=b.ec;
if(b.cW.fE){a=b.cW.fE.ec}else{if(b.fE){a=b.fE.ec}}return a}function iA(){return be(this.cW.cX.z,this.cY.cX.z)}function iB(a){var b=this;
return(b.cW.bG(a)?b.cY:b.cW)}function iC(){return this.cY.cX.cn(this.cW.cX)}function iD(a){return this.cW.bG(a)||this.cY.bG(a)}function ge(c,b,a,d){var e=this;
eY.apply(e);
e.cW=c;
e.cY=b;
e.di=a;
e.dV=d;
e.du=F;
e.getIndex=iw;
e.fd=il;
e.iE=iv;
e.dT=ik;
e.e9=ix;
e.dR=io;
e.iF=it;
e.iG=ir;
e.iH=iD;
e.g8=iq;
e.gZ=iy;
e.getMolecule=g9;
e.g_=im;
e.eU=dM;
e.dp=iA;
e.b1=ij;
e.gr=iB;
e.iI=iC;
e.cV=cV;
e.eb=eZ;
e.cZ=iz;
e.dU=cU}function iJ(g){g.sort(iK);
for(var b=[],d,c=[],e,f=0,a=bd(g);
f<a;
f++){e=g[f];
d=e.dS;
if(!iL(d)&&!bU(c,d)){b.push(e);
bX(c,d)}}return b}function iL(b){for(var d,c=0,a=bd(b);
c<a;
c++){d=b[c];
if(d.f3&&d.f3.fW){return T}}return F}function iK(e,c){var f=(e.dS?bd(e.dS):0),d=(c.dS?bd(c.dS):0);
if(f<d){return -1}if(f>d){return 1}return 0}function iM(e,c){var d=bd(e.dR()),f=bd(c.dR()),g,h;
if(d<f){return 1}if(d>f){return -1}g=bd(e.dh),h=bd(c.dh);
if(g<h){return 1}if(g>h){return -1}return 0}function iN(c){var e=this.dS,b=[],d,a,f;
if(c){bN(b,this.dh);
bN(b,e)}else{for(d=0,a=bd(e);
d<a;
d++){f=e[d];
b.push(f);
bX(b,f.dh);
bY(b,f.eh)}}return b}function iO(){if(!this.iP){for(var e=this,c=e.dT(),d=e.dS,b=bd(d)-1,a=d[0].cX.cn(c).ce(d[b].cX.cn(c));
b>0;
b--){a.ci(d[b].cX.cn(c).ce(d[b-1].cX.cn(c)))}if(c.eH(a.cA(c),d[0].cX,d[1].cX)>0){a.eA(-1)}e.iQ=(e.iP=a.cp()).b1();
e.iQ.ci(c)}}function iR(a){var b=this;
b.iS();
return ac-b.fc.cf(a.cX,b.iQ)}function iT(){for(var d=0,e=this.dh,b=bd(e),a,c=e[b-1].di;
d<b;
d++){a=e[d].di;
if(a==3||(a==2&&c==2)){return T}c=a}}function iU(){for(var b=0,c=this.dh,a=bd(c);
b<a;
b++){if(c[b].di!=1){return F}}return T}function iV(){if(!this.fc){var b=new b8(),e=this.dS,d=0,c,a;
for(c=0,a=bd(e);
c<a;
c++){b.ci(e[c].cX);
d++}if(d>1){b.x/=d;
b.y/=d;
b.z/=d}this.fc=b}return this.fc}function iW(e){var c=this,b=[],d=[],h,k,g,f,a;

for(k=0,g=bd(c.dS);
k<g;
k++){h=c.dS[k];
if(!e||!h.dO){b.push(h.cX)}bY(d,h.eh)}for(k=0,g=bd(d);
k<g;
k++){h=d[k];
if(h.eu){for(f=0,a=bd(h.eu);
f<a;
f++){b.push(h.eu[f].dE,h.eu[f].dD)}}if(!e){bO(b,h.fc);
bO(b,h.c2);
bO(b,h.c0)}}if(!e){bO(b,c.fc);
bO(b,c.c2);
bO(b,c.c0)}return b}function iX(f){if(!(f instanceof iY)){return F}var k=this.dS,a=bd(k),g,e,h,d,c,b;
if(a!=bd(f.dS)){return F}g=bM(f.dS,k[0]);
if(g==-1){return F}e=bM(f.dS,k[1]);
if(e==-1){return F}h=e-g;
if(M.abs(h)==a-1){h=-1}if(M.abs(h)!=1){return F}for(d=2,c=a;
d<c;
d++){b=(c+d*h+g)%c;
if(!k[d].bG(f.dS[b])){return F}}return T}function iZ(d,b){if(!b){b=[]}else{if(bL(b,this)){return}}if(d!=a_){b.push(this);
this.iP=al;
if(d==ba){this.fc=al}if(d!=a8){d=ba}for(var c=0,a=bd(this.dS);
c<a;
c++){this.dS[c].fd(d,b)}for(c=0,a=bd(this.dh);
c<a;
c++){this.dh[c].fd(d,b)}b.pop()}}function i0(){var a=this.dS,b=a.concat(),c;
b.sort(iM);
c=bM(a,b[0]);
bT(a,c);
if(bM(b,a[1])>bM(b,a[bd(b)-1])){a.reverse();
bT(a,-1)}}function iY(a,c){var b=this;
b.bE=bz();
b.dS=a;
b.dh=c;
b.i1=i0;
b.dq=iN;
b.fd=iZ;
b.dT=iV;
b.iS=iO;
b.i2=iR;
b.i3=iT;
b.i4=iU;
b.e9=iW;
b.bG=iX}function i5(b){var a=bY(this.dS,b);
if(a){b.h3=this}return a}function i6(a){return bY(this.dh,a)}function i7(){for(var b=[],c=0,a=bd(this.dS);
c<a;
c++){b.push(this.dS[c].cX.b1())}return b}function i8(c){var b=0,a=bd(this.dS);
if(bd(c)!=a){alert("Error")}for(;
b<a;
b++){this.dS[b].cX=c[b].b1()}}function i9(g,e,j){var a=bd(e),c=e[a-1],l,f,k,d,b,h;
if(a<=i_){for(d=0,b=bd(c.dh);
d<b;
d++){l=c.dh[d];
f=(c.bG(l.cW)?l.cY:l.cW);
if(a>=2&&f.bG(e[a-2])){continue}h=-1;
j[a-1]=l;
if(a>=2){h=bM(e,f)}if(h==-1){e[a]=f;
i9(g,e,j);
e.length=a}else{k=new iY(e.slice(h),j.slice(h));
bY(g,k)}}}j.length=a-1;
return g}function ja(){var c=this;
if(!c.g1){c.g1=[];
for(var c=this,b=0,a=bd(c.dh);
b<a;
b++){c.dh[b].g1=al}if(bd(c.dS)){i9(c.g1,[c.dS[0]],[])}}return c.g1}function jb(){var a=this;
eL.apply(a);
a.dS=[];
a.h4=[];
a.dh=[];
a.fd=jc;
a.dR=ja;
a.dq=jd;
a.e9=je;
a.eA=jf;
a.dQ=e8;
a.jg=jh;
a.cp=ji;
a.jj=jk;
a.fC=i5;
a.fG=i6;
a.jl=i7;
a.jm=i8}function jn(t,n,b,h,f,k){if(f){n=f.cX}if(k){b=k.cX}if(!n||!b){return F}var a=ep*1.4,u=b.cH(n),o=M.min(M.round(u/a/M.cos(jo*af)),jp),d,g=jo,l=[],j=[],r,q,c,m,p;
if(o<=0){return F}d=n.cC(b);
if(k){if(o>1){g=M.acos(bx(u/o/a,-0.9,0.9))/af}}gd.fP();
if(o==1){if(f&&(c=f.g3(k))){if(!h){c=gd.fG(c)}c.iE();
gd.eU();
return T}else{d+=g}}else{if(o%2){d+=g/(o-1)}}l[0]=M.cos((d-g)*af);
l[1]=M.cos((d+g)*af);
j[0]=M.sin((d-g)*af);
j[1]=M.sin((d+g)*af);
if(k){o--}if(h){m=st.gh();
if(!t.ctrlKey){m.jq()}if(f){r=f;
h=f.ec}else{r=new gb(n.b1());
h.fC(r);
m.fC(r)}}else{if(f){r=gd.fC(f)}else{r=gd.fC(new gb(n.b1()))}aV.jr.push(aV.text(b.x,b.y+30/hK,o+(f?0:1)).attr(aw,2+20/hK))}if(!f){r.f9(gO(),T)}for(p=0;

p<o;
p++){q=r.b1();
if(p==0){q.f9(gO(),T)}q.cX.x+=a*l[p%2];
q.cX.y+=a*j[p%2];
if(!h){q=gd.fC(q)}c=new ge(r,q,1,0);
if(h){h.fC(q);
h.fG(c);
m.fG(c);
m.fC(q)}else{c=gd.fG(c)}r=q}if(k){if(h){c=h.fH.js(r,k,1,0);
m.fG(c)}else{q=gd.fC(k);
c=gd.fG(new ge(r,q,1,0))}}gd.eU();
return T}function jt(d){if(!d){d=new b2()}var e=this,b=new fn(),c,a;
bH(d,e,b);
b.ju=2;
for(c=0,a=bd(e.h4);
c<a;
c++){b.hw(d.b0(e.h4[c]),T)}for(c=0,a=bd(e.dh);
c<a;
c++){b.fG(d.b0(e.dh[c]),T)}for(c=0,a=bd(e.dS);
c<a;
c++){b.fC(d.b0(e.dS[c]),T)}b.ee=d.b0(e.ee);
b.ju=1;
b.ip();
return b}function jc(e,b){if(!b){b=[]}else{if(bL(b,this)){return}}var d=this,c,a;
b.push(d);
if(e>a9){d.fc=al;
d.fj=al}if(e>a8&&e<bb){d.c2=al;
d.c0=al}if(e!=a_){if(e!=a8){e=ba}for(c=0,a=bd(d.dS);
c<a;
c++){d.dS[c].fd(e,b)}for(c=0,a=bd(d.dh);
c<a;
c++){d.dh[c].fd(e,b)}if(d.h4){for(c=0,a=bd(d.h4);
c<a;
c++){d.h4[c].fd(e,b)}}if(d.jv){for(c=0,a=bd(d.jv);
c<a;
c++){d.jv[c].fd(e,b)}}if(d.g1){for(c=0,a=bd(d.g1);
c<a;
c++){d.g1[c].fd(e,b)}}}if(d.fH){d.fH.fd(e,b)}else{if(d.ec){d.ec.fd(e,b)}}b.pop()}function jw(f){if(!bd(this.dS)){return}this.dQ();
if(f.x>this.c2.x&&f.x<this.c0.x){var e=this,c=new jx(e),d,a,b;
if(!e.jv){e.ip()}if(bd(e.dS)<2){return}for(d=0,a=bd(e.jv);
d<a;
d++){b=e.jv[d];
b.dQ();
if(0.5*(b.c2.x+b.c0.x)>f.x){c.jy.push(b)}else{c.jz.push(b)}}return c}}function jf(d,b){if(b){b=this.dT()}for(var e=this.e9(),c=0,a=bd(e);
c<a;
c++){e[c].eA(d,b)}}function ji(){if(bd(this.dS)>1){var h=this,e=0,g=0,d,a,c,f,b;
if(a=bd(h.dh)){for(d=0;
d<a;
d++){f=h.dh[d];
e+=f.cW.cX.cH(f.cY.cX);
g++}}else{for(d=0,a=bd(h.dS);
d<a;
d++){b=h.dS[d];
for(c=0;
c<d;
c++){e+=b.cX.cH(h.dS[c].cX);
g++}}}if(e>0){h.eA(c1*g/e)}}this.dQ()}function jA(c,d){var b=c-this.c2.x,a=bu(d)-0.5*(this.c2.y+this.c0.y);
this.ci(b,a)}function jB(d,b){var e=this,c,a;
if(e.bG(d)){return}for(c=0,a=bd(d.dS);
c<a;
c++){e.fC(d.dS[c])}for(c=0,a=bd(d.dh);
c<a;
c++){e.fG(d.dh[c])}for(c=0,a=bd(d.h4);
c<a;
c++){e.hw(d.h4[c])}if(e.g1&&d.g1){bN(e.g1,d.g1)}else{e.jC()}e.ip();
if(b||ed=="tmpl"){e.ee=d.ee}e.fd(ba)}function jD(c,b){var d=this,a;
if(bY(d.dS,c)){c.ec=d;
c.dP=al;
c.e5=al;
if(!b){e4(c);
a=d.jE();
a.fd(a_);
if(a.fE){a.fE.fd(a_)}}return T}return F}function jF(h,c,g,m){var u=this,l,p,n,o,t,d,f,e=[],k=[],a=[],q=[],b,r=bd(m);
if(r<=1){l=new ic();
if(r){l.hf(m[0].cW.du?m[0].cW:m[0].cY)}}else{if((n=bc(h))<hZ&&n>1){l=new ig();
u.fl(m[0],T);
u.fl(m[1],T);
bN(e,c);
bN(k,g);
bQ(k,m);
hr(m,0,e,a);
hr(m,1,e,a);
for(p=0;
p<n;
p++){if(p>0){b=new b2();
q[p]=b}for(o=0,t=bd(k);
o<t;
o++){d=k[o];
if(p==0){l.fG(d);
bY(e,d.cW);
bY(e,d.cY)}else{f=b.b0(d);
l.fG(f);
u.fG(f,T)}}for(o=0,t=bd(e);
o<t;
o++){d=e[o];
if(p==0){l.fC(d);
l.hf(d)}else{f=b.b0(d);
l.fC(f);
u.fC(f,T)}}}for(p=0;
p<=n;
p++){if(p==0){f=new ge(a[1],a[0],m[0].di,m[0].dV);
m[0]=f}else{if(p==n){f=new ge(q[p-1].b0(a[2]),a[3],m[1].di,m[1].dV);
m[1]=f}else{if(p==1){f=new ge(a[2],q[p].b0(a[0]),m[1].di,0)
}else{f=new ge(q[p-1].b0(a[2]),q[p].b0(a[0]),m[1].di,0)}}}l.fG(f);
u.fG(f,T)}}else{l=new ii();
if(n){l.hi=""}else{l.hi="HT"}}}l.hg(m);
if(l.type!=ar){for(o=0,t=bd(g);
o<t;
o++){l.fG(g[o])}for(o=0,t=bd(c);
o<t;
o++){l.fC(c[o])}}l.df=h;
l.hh=n;
l.ia();
u.hw(l);
l.hU(T);
return l}function jG(c,b){if(bY(this.h4,c)){c.ec=this;
var a;
if(c.dS[0]&&(a=c.dS[0].h3)){c.h3=a;
bY(a.h4,c)}c.dP=al;
c.e5=al;
if(!b){e4(c)}return T}return F}function jH(d,c){if(d.bG(c)){return}e4(c);
this.fd(bb);
if(bL(this.dS,c)){e0(d,this.dS)}else{bR(this.dS,d,c);
e0(d)}var f=this,a,e,b;
for(a=bd(d.dh)-1;
a>=0;
a--){e=d.dh[a];
e4(e);
if(e.cW.bG(d)){e.cW=c;
e4(e.cY)}else{if(e.cY.bG(d)){e.cY=c;
e4(e.cW)}}bY(c.dh,e)}c.fd(bb);
if(!d.dF){b=st.gh();
bR(b.dS,d,c);
c.du=d.du}if(d.bG(f.ee)){f.ee=c}f.jC();
f.ip();
if(d.bG(eg)||c.bG(eg)){hX()}}function jI(d,h){var g=this,b,f,c=st.gh(),e,a=d.h3;
g.fd(ba);
e0(d,g.dS);
for(b=bd(d.dh)-1;
b>=0;
b--){f=d.dh[b];
if(f){g.fl(f,h)}}g.jJ(d);
bS(d,c.dS);
if(d.bG(g.ee)){g.ee=al}if(g){if(a){bS(d,a.dS);
if(!bd(a.dS)){e0(a,g.jv)}}if(!bd(g.dS)&&(e=g.fH)){e.jK(g)}}if(d.bG(eg)){eg=al;
hX()}}function jL(d){var e=this;
e.fd(ba);
d.dj();
e0(d,e.h4);
var a,c,b=st.gh();
for(a=bd(d.dh)-1;
a>=0;
a--){c=d.dh[a];
if(c){e.fl(c)}}for(a=bd(d.dS)-1;
a>=0;
a--){c=d.dS[a];
if(c){e.fm(c)}}e.jJ(d);
bS(d,b.h4);
if(d.bG(hV)){hV=al;
hX()}}function jM(e,d){var f=this,b=e.cW,a=e.cY,c;
if(!b||!a){return F}if(bY(f.dh,e)){e.ec=f;
e.dP=al;
e.e5=al;
bY(e.cW.dh,e);
bY(e.cY.dh,e);
if(f.ju==1){c=e.cW.h3;
if(!c){if(!e.cY.h3){f.ip()}else{c=e.cY.h3;
e.h3=c;
e.cW.h3=c;
bY(c.dh,e);
bY(c.dS,e.cW)}}else{if(!e.cY.h3){e.h3=c;
e.cY.h3=c;
bY(c.dh,e);
bY(c.dS,e.cY)}else{if(!c.bG(e.cY.h3)){f.ip()}else{f.jC();
bY(c.dh,e)}}}}e.cW.fd(bb);
e.cY.fd(bb);
if(!d){e3(e.cW.dh);
e3(e.cY.dh);
e4(e.cW);
e4(e.cY)}return T}return F}function jN(c,b){if(bL(this.dh,b)){e0(c,this.dh)}else{bR(this.dh,c,b);
e0(c)}if(bL(c.cW.dh,b)){bS(c,c.cW.dh)}else{bR(c.cW.dh,c,b)}if(bL(c.cY.dh,b)){bS(c,c.cY.dh)}else{bR(c.cY.dh,c,b)}e4(b);
c.cW.fd(bb);
c.cY.fd(bb);
e4(c.cW);
e4(c.cY);
e3(c.cW.dh);
e3(c.cY.dh);
this.fd(bb);
var a=st.gh();
bR(a.dh,c,b);
b.du=c.du;
this.jC();
this.ip()}function jO(){for(var c=this,b=0,a=bd(c.dh);
b<a;
b++){c.dh[b].g1=al}for(b=0,a=bd(c.dS);
b<a;
b++){c.dS[b].g1=al}if(c.jv){for(b=0,a=bd(c.jv);
b<a;
b++){c.jv[b].g1=al}}c.g1=al}function jP(f,h){var g=this,d=st.gh(),c,a,e,b=f.cW.h3;
if(!b){b=f.cY.h3}e0(f,g.dh);
bS(f,f.cW.dh);
bS(f,f.cY.dh);
f.cW.fd(bb);
f.cY.fd(bb);
e4(f.cW);
e4(f.cY);
e3(f.cW.dh);
e3(f.cY.dh);
g.fd(ba);
if(h){if(b){bS(f,b.dh)}}else{g.ip();
g.jC()}g.jJ(f);
d.fl(f);
for(c=0,a=bd(g.h4);

c<a;
c++){e=g.h4[c];
if(bL(e.hd,f)){if(e.type!=aq){bS(f,e.hd)}else{e.h0()}}}}function jQ(e,b){e.h3=b;
b.dS.push(e);
if(bY(b.h4,e.eh)){e.eh.h3=b}var c,a,d;
for(c=0,a=bd(e.dh);
c<a;
c++){d=e.dh[c];
bY(b.dh,d);
if(!d.cW.h3){jQ(d.cW,b)}else{if(!d.cY.h3){jQ(d.cY,b)}}}}function jR(d){if(d||gd.fQ()){var e=this;
e.jv=[];
for(var b,c=0,a=bd(e.dS);
c<a;
c++){e.dS[c].h3=al}for(c=0,a=bd(e.dS);
c<a;
c++){if(!e.dS[c].h3){b=new jb();
e.jv.push(b);
b.ec=e;
jQ(e.dS[c],b)}}}}function en(b,a,c){if(c){return b.cX.cC(a.cX,c.cX)}else{return b.cX.cC(a.cX)}}function jS(b,a,c){if(c){return b.cX.cf(a.cX,c.cX)}else{return b.cX.cf(a.cX)}}function gc(l,q,n,m){var o,b=ep*1.4,c,d,r,p=[],h,g,f,a=3*jT,k=l.cX;
if(n){n.z=k.z}if(n&&m&&m.ctrlKey){if(m.shiftKey){return n}o=k.cC(n);
c=cQ(k,o,b)}else{if(n&&m&&m.shiftKey){b=k.cH(n)}if((f=bd(l.dh))>1&&f<4&&q==1){for(h=0;
h<f;
h++){r=l.dh[h].gr(l);
for(g=h+1;
g<f;
g++){if(M.abs(ai-k.cf(r.cX,l.dh[g].gr(l).cX))>5){h=f+1;
break}}}if(h==f){h=l.dh[0].gr(l).cX;
g=l.dh[1].gr(l).cX;
c=k.eE(h,g,b,0.5*ai);
r=k.eE(h,g,b,-0.5*ai);
if(n){h=n.cH(c);
g=n.cH(r)}else{f=l.ec;
h=f.jg(c);
g=f.jg(r)}if(g<h||(g==h&&k.eF(r)>k.eF(c))){c=r}}}if(!c){o=l.gf(q,n);
do{c=cQ(k,o,b);
d=l.ec.fH.jU(c,a,a);
if(!d||!bd(d)){break}for(h=0;
h<bd(d);
h++){p.push(new gl(l,d[h]))}o=l.gu(n,p)}while(bd(p)<10);
if(f>2||!l.g4()){a=0;
for(h=f-1;
h>=0;
h--){d=l.dh[h].gr(l);
a+=(d.cX.z-k.z)/(M.abs(o-en(l,d))+1)}c=cP(k,o,(a>0?-30:30),b)}}}return c}function jV(c,a,b){if(bu(b)!=0){return ap+c+bo("1",3)+S+bo(a+1,3)+S+bo(M.round(b),3)}else{return""}}function jW(){var c=this,f,e,d,b,k,g,h=[],a=ab+"\n"+Number(new Date())+"\n"+navigator.userAgent+"\n"+bo(bd(c.dS),3)+bo(bd(c.dh),3);
if(ed=="rxn"){a+="  0  0  0  0  0  0  0  0  0 V2000"}else{a+="  0  0  0  0  0  0  0  0999 V2000"}for(f=0,e=bd(c.dS);
f<e;
f++){a+=c.dS[f].g_()}for(f=0,e=bd(c.dh);
f<e;
f++){a+=c.dh[f].g_()}for(f=0,e=bd(c.dS);
f<e;
f++){a+=jV("CHG",f,c.dS[f].ea());
a+=jV("RAD",f,c.dS[f].dd);
a+=jV("ISO",f,c.dS[f].de)}if(ed=="tmpl"&&c.ee){a+=ap+"ATT"+bo("1",3)+S+bo(c.ee.getIndex(),3)+S+aZ.val()+S+a0.val()}for(f=0,e=bd(c.h4);
f<e;
f++){k=c.h4[f];
if(!(b=bd(k.dS))){continue}a+=ap+"STY"+bo("1",3)+S+bo(f+1,3)+S+k.type;
if(k.type==as){a+=ap+"SCN"+bo("1",3)+S+bo(f+1,3)+S+k.hi}for(d=0;
d<b;
d++){a+=(d%15?"":ap+"SAL "+bo(f+1,3)+bo(M.min(b-d,15),3))+bo((k.dS[d].getIndex()+1),4)}if(k.type==ar){for(d=0,b=bd(k.he);
d<b;
d++){a+=(d%15?"":ap+"SPA "+bo(f+1,3)+bo(M.min(b-d,15),3))+bo((k.he[d].getIndex()+1),4)}}if(k.eu){for(d=0,b=bd(k.eu);
d<b;
d++){g=k.eu[d];
a+=ap+"SDI "+bo(f+1,3)+bo(4,3)+f0(g.dE.x)+f0(-g.dE.y)+f0(g.dD.x)+f0(-g.dD.y)}}for(d=0,b=bd(k.hd);
d<b;
d++){a+=(d%15?"":ap+"SBL "+bo(f+1,3)+bo(M.min(b-d,15),3))+bo((k.hd[d].getIndex()+1),4)}a+=ap+"SMT "+bo(f+1,3)+S+bv(k.df);
if(k.es){h.push(k)}}for(d=0,b=bd(h);
d<b;
d++){a+=(d%15?"":ap+"SDS EXP"+bo(M.min(b-d,15),3)+S)+bo(h[d].getIndex()+1,3)}for(f=0,e=bd(c.jX);
f<e;
f++){a+="\n"+c.jX[f]}a+=ap+"END\n";
return a}function jY(t){var h=new fn(),a=t.split("\n"),p=0,m=bd(a),o,u,n,y,q={},c,d,b,x,w,f,g,l,v;
h.ju=0;
do{if(p<m){p++}else{return al}}while(a[p]!=al&&!bl(a[p],"V2000"));

c=bi(a[p],[3,3]);
for(o=0,u=bc(c[0]);
o<u;
o++){p++;
d=bi(a[p],[10,10,10,1,3,2,3,3,3,3,3,3,3,3,3,3]);
b=new gb(new b8(parseFloat(d[0]),-parseFloat(d[1]),parseFloat(d[2])));
l=bc(d[6]);
if(l!=0){b.f4=4-l}b.gj(d[4]);
b.dg=bc(d[8])-1;
if(b.dg<0){b.dg=al}b.f6=bc(d[10]);
if(b.f6>=15){b.f6=0}else{if(b.f6==0){b.f6=al}}if(d[5]!="0"&&b.f3){b.de=M.round(b.f3.m)+bc(d[5])}h.fC(b)}for(o=0,u=bc(c[1]);
o<u;
o++){p++;
d=bi(a[p],[3,3,3,3,3,3,3]);
x=h.dS[bc(d[0])-1];
w=h.dS[bc(d[1])-1];
if(!x||!w||x.bG(w)){continue}l=bc(d[2]);
if(a7[l]!=al){l=a7[l]}f=new ge(x,w,l,bc(d[3]));
h.fG(f)}while(p<m){p++;
d=bj(a[p]);
switch(d[1]){case"CHG":u=bu(bc(d[2]));
try{for(o=0;
o<u;
o++){l=bc(d[2*o+4]);
if(!isNaN(l)){b=h.dS[bc(d[2*o+3])-1];
b.f4=l}}}catch(r){}break;
case"ISO":u=bu(bc(d[2]));
try{for(o=0;
o<u;
o++){l=bc(d[2*o+4]);
if(!isNaN(l)){b=h.dS[bc(d[2*o+3])-1];
b.de=l}}}catch(r){}break;
case"RAD":u=bu(bc(d[2]));
try{for(o=0;
o<u;
o++){l=bc(d[2*o+4]);
if(!isNaN(l)){b=h.dS[bc(d[2*o+3])-1];
b.dd=l}}}catch(r){}break;
case"ATT":try{h.ee=h.dS[bc(d[3])];
h.aZ=bv(d[4]).split(",");
h.a0=bv(d[5])}catch(r){}break;
case"STY":u=3+2*bu(bc(d[2]));
try{for(o=3;
o<u;
o+=2){l=d[o+1].toUpperCase();
v=bc(d[o]);
if(l=="GEN"){l=as}if(l==aq){g=new ic()}else{if(l==ar){g=new ig()}else{if(l==as){g=new ii()}else{continue}}}h.hw(g);
q[v]=g}}catch(r){}break;
case"SCN":u=3+2*bu(bc(d[2]));
try{for(o=3;
o<u;
o+=2){v=bc(d[o]);
g=q[v];
if(g.type==as){g.hi=d[o+1].toUpperCase()}}}catch(r){}break;
case"SDI":v=bc(d[2]);
try{g=q[v];
if(g&&g.ih){g.ih(d.slice(4))}}catch(r){}break;
case"SAL":v=bc(d[2]);
try{g=q[v];
if(g){for(o=4,u=bd(d);
o<u;
o++){g.fC(h.dS[bc(d[o])-1])}}}catch(r){}break;
case"SPA":v=bc(d[2]);
try{g=q[v];
if(g){for(o=4,u=bd(d);
o<u;
o++){g.hf(h.dS[bc(d[o])-1])}}}catch(r){}break;
case"SBL":v=bc(d[2]);
try{g=q[v];
if(g){for(o=4,u=bd(d);
o<u;
o++){f=h.dh[bc(d[o])-1];
g.hg(f)}}}catch(r){}break;
case"SDS":l=a[p].substr(13);
try{for(o=0,u=bd(l);
o<u;
o+=3){v=bc(bh(l.substr(o,3)));
g=q[v];
if(g){g.hU(F)}}}catch(r){}break;
case"SMT":v=bc(d[2]);
try{g=q[v];
if(g){g.df=d[3].replace(/^[\s\^]+|[\s\^]+$/g,"");
g.hh=bc(d[3]);
if(g.hh){g.hi=""}}}catch(r){}break;
case"END":p=m;
break;
default:h.jX.push(a[p])}}for(p=0,m=bd(h.dS);
p<m;
p++){b=h.dS[p];
b.gG();
if(b.f4==b.gA){b.f4=al}}for(p=0,m=bd(h.h4);
p<m;
p++){g=h.h4[p];
for(o=0,u=bd(g.dS);
o<u;
o++){b=g.dS[o];
for(n=0,y=bd(b.dh);
n<y;
n++){g.fG(b.dh[n])}}if(g.type==aq&&!bd(g.hd)){bX(g.he,g.dS)}if(g.type!=ar){for(o=0,u=bd(g.he);
o<u;
o++){b=g.he[o];
for(n=0,y=bd(b.dh);
n<y;
n++){f=b.dh[n];
if(!bL(g.dS,(f.cW.bG(b)?f.cY:f.cW))){bS(f,g.dh)}}}}if(g.es==al){g.hU(T)}}h.ju=1;
h.ip();
return h}function jZ(){if(!this.g1){if(!this.jv){this.ip()}this.g1=[];
for(var b=0,a=bd(this.jv);
b<a;
b++){bN(this.g1,this.jv[b].dR())}}return this.g1}function j0(){var a=this;
if(a.dZ){return a.dZ}if(a.fH){return a.fH.cV()}}function jd(b){var c=this,a;
if(!c.fj){a=[];
bN(a,c.dh);
bN(a,c.dS);
bN(a,c.h4);
c.fj=a}return c.fj}function jh(e){for(var c=0,d,a=this.dS,b=bd(a)-1;
b>=0;
b--){d=j1-a[b].cX.cH(e);
if(d>0){c+=j2*d*d}}return c}function j3(){var d=this,c,b,a,e;
if(!d.c2||!d.c0){e8.apply(d);

for(b=0,a=bd(d.h4);
b<a;
b++){c=d.h4[b];
if(c.type==aq){e=0.4*j4*bd(c.df);
fa(d,c.fc.y-e);
fa(d,c.fc.y+e)}}}}function je(e){var h=this,b=[],g,d,a,c,f;
for(d=0,a=bd(h.dS);
d<a;
d++){g=h.dS[d];
if(!e||!g.dO){b.push(g.cX)}}if(!e){if(h.jv){for(d=0,a=bd(h.jv);
d<a;
d++){bO(b,h.jv[d].fc)}}if(h.g1){for(d=0,a=bd(h.g1);
d<a;
d++){bO(b,h.g1[d].fc)}}}for(d=0,a=bd(h.h4);
d<a;
d++){g=h.h4[d];
if(g.eu){for(c=0,f=bd(g.eu);
c<f;
c++){b.push(g.eu[c].dE,g.eu[c].dD)}}if(!e){bO(b,g.fc);
bO(b,g.c2);
bO(b,g.c0)}else{if(g.type==aq){bO(b,g.dT())}}}if(!e){bO(b,h.fc);
bO(b,h.c2);
bO(b,h.c0)}return b}function j5(b,a){this.gm=b;
this.j6=a}function j7(){for(var b=[],e,d,f,c=0,a=bd(this.dS);
c<a;
c++){e=this.dS[c];
if((d=e.f3)&&d.fX){f=d.fX+e.ea()-e.gv();
if(f>0){b.push(new j5(e,f))}}}return b}function j8(){if(!this.fH){return -1}return bM(this.fH.fL,this)}function g9(){return this.ec}function j9(){return(this.fH?this.fH:this)}function jx(a){this.ec=a;
this.jz=[];
this.jy=[]}function fn(){var a=this;
eL.apply(a);
a.dS=[];
a.h4=[];
a.dh=[];
a.jX=[];
a.ju=1;
a.ip=jR;
a.dR=jZ;
a.fd=jc;
a.jC=jO;
a.jW=jW;
a.j_=j7;
a.eA=jf;
a.dQ=j3;
a.jg=jh;
a.cp=ji;
a.jA=jA;
a.fC=jD;
a.hw=jG;
a.hv=jF;
a.gi=jH;
a.fm=jI;
a.hJ=jL;
a.fG=jM;
a.ka=jN;
a.fl=jP;
a.fq=jB;
a.kb=jw;
a.jj=kc;
a.dq=jd;
a.jJ=fi;
a.e9=je;
a.getIndex=j8;
a.b1=jt;
a.jE=j9;
a.eb=eZ;
a.cV=j0}function kd(d){if(!d){d=new b2()}var e=this,b=new fp(e.dZ),c,a;
bH(d,e,b);
for(c=0,a=bd(e.fL);
c<a;
c++){b.fq(e.fL[c].b1(d))}for(c=0,a=bd(e.ke);
c<a;
c++){b.kf(e.ke[c].b1(d),T)}b.kg=e.kg;
if(e.fu){b.fu=e.fu.b1(d);
b.fu.fH=b}b.kh=e.kh.b1(d);
return b}function ki(b){if(!b){b=new b2()}var c=this,a=new kj(c.cX.x,c.cX.y);
bH(b,c,a);
a.du=c.du;
return a}function kk(b){if(!b){b=new b2()}var c=this,a=new fy(c.dE.b1(),c.dD.b1());
bH(b,c,a);
a.du=c.du;
a.fH=b.b0(c.fH);
return a}function kl(){return co(this.dE,this.dD)}function km(a){a.dj();
return bS(a,this.fL)}function kn(a,c,b){var d=this;
if(ed=="rxn"||!bd(d.fL)){if(bY(d.fL,a)){a.fH=d;
if(c){d.ko()}}}else{d.fL[0].fq(a,b)}}function kp(){this.kq();
this.kr();
this.ks()}function kt(){if(ed!="rxn"){return}var c=this,f,e,g,a=c.fL,b,d,h,k,j;
for(f=bd(a)-1;
f>=0;
f--){b=a[f];
if(!bd(b.dS)){this.jK(b)}}a.sort(ku);
if(c.fu){g=c.fu.dT()}for(f=0,e=bd(a)-1;
f<e;
f++){b=a[f];
k=a[f+1];
d=b.dT();
j=k.dT();
if(g&&g.x>d.x&&g.x<j.x){c.kg=f+1
}else{h=c.kv(d);
if(!h||h.cX.x>=j.x){b.dQ();
k.dQ();
c.kw(0.5*(b.c0.x+k.c2.x),0.5*(j.y+d.y))}}}}function kx(l,k,d){if(l&&k){if(d){var c=this,b=l.dT(),j=k.dT(),e=M.min(b.x,j.x),a=M.max(b.x,j.x),g,f,h;
for(g=bd(c.ke)-1;
g>=0;
g--){f=c.ke[g].cX;
if(e<f.x&&f.x<a){c.ky(c.ke[g])}}if(c.fu){h=c.fu.dT();
if(e<h.x&&h.x<a){c.kz()}}}l.fq(k);
bS(k,this.fL);
this.kr()}}function kA(){var a=this,j=a.ke.concat(),e,g,c,f,b={},d={},h;
if(a.fu){j.push(a.fu)}j.sort(kB);
for(e=bd(j)-1;
e>=0;
e--){g=j[e];
f=g.dT();
h=this.kC(f);
if(!(h=this.kC(f))&&g instanceof kj){a.ky(g,T)}else{b[g.bE]=h;
if(!(h=this.kD(f))&&g instanceof kj){a.ky(g,T)}d[g.bE]=h}}for(e=bd(j)-2;
e>=0;
e--){g=j[e];
c=j[e+1];
h=b[g.bE];
if(h&&h.bG(b[c.bE])&&d[g.bE]&&d[g.bE].bG(d[c.bE])){if(c instanceof kj){a.ky(c,T)}else{a.ky(g,T)}}}}function kE(f,j,g){for(var a,h=an,b,c,e=0,d=bd(this.fL);
e<d;
e++){b=this.fL[e].dT();
if((b.x-f.x)*j>0||(b.y-f.y)*g>0){c=f.cH(b,T);
if(c<h){a=this.fL[e];
h=c}}}return a}function kF(a){return this.kG(a,-1,0)}function kH(a){return this.kG(a,1,0)}function kI(f,j,g){for(var a,h=an,b,c,e=0,d=bd(this.ke);
e<d;
e++){b=this.ke[e].cX;
if((b.x-f.x)*j>0||(b.y-f.y)*g>0){c=f.cH(b,T);
if(c<h){a=this.ke[e];
h=c}}}return a}function kJ(a){return this.kK(a,-1,0)}function kL(a){return this.kK(a,1,0)}function kM(c){var k=c.ec,l=new fn(),b,h,m,g,f,e,a,d=st.gh();
this.fL.splice(bM(this.fL,k)+1,0,l);
l.fH=this;
l.jv=[];
this.kr();
for(g=0,f=bd(c.jy);
g<f;
g++){b=c.jy[g];
for(e=0,a=bd(b.dS);
e<a;
e++){h=b.dS[e];
bS(h,k.dS);
if(!bL(l.dS,h)){l.fC(h)}}for(e=0,a=bd(b.dh);
e<a;
e++){m=b.dh[e];
bS(m,k.dh);
if(!bL(l.dh,m)){l.fG(m)}}bS(b,k.jv);
bY(l.jv,b);
delete k.g1;
k.fd(ba);
d.fd(bb)}}function kN(e,b){var c=this,d,a;
if(!b){d=c.kC(e.cX),a=c.kD(e.cX);
c.gg(d,a,F)}e.dj();
e0(e,c.ke);
c.jJ(e);
if(!b){c.kr()}}function kO(c,a){if(ed!="rxn"){return}var b=this;
b.ke.push(c);
c.fH=b;
if(!a){e4(c);
b.fd(a_)}return T}function kP(b,a,d){var c;
if(b instanceof b8){c=new kj(b.x,b.y)}else{c=new kj(b,a)}this.kf(c,d);
if(!d){this.kQ(c.cX)}return c}function dy(b,a,d,c){if(!c){c=this.data(ao)}kR=c;
switch(gN){case aK:case aL:case aG:case aH:c.c8.attr("cursor","move");
break;
case aP:if(gP){c.fH.ky(c);
kR=al;
kS=T}break}}function dz(b,a,d,c){kR=al}function dH(c,a,d,b){if(!b){b=this.data(ao)}kT=b;
switch(gN){case aK:case aL:case aG:case aH:b.c8.attr("cursor","move");
break;
case aP:if(gP){b.fH.kz(b);
kT=al}break}}function dI(c,a,d,b){kT=al}function kU(h){for(var f=this,e,b,g=an,d,c=0,a=bd(f.fL);
c<a;
c++){b=f.fL[c].kb(h);
if(b){d=h.cH(f.fL[c].dT(),T);
if(d<g){e=b;
g=d}}}if(e){f.kV(e)}f.kr()}function kW(b){var c=this,a=c.fu;
if(!a){return F}if(b){c.kw(co(a.dE,a.dD))}c.jJ(a);
a.dj();
delete c.fu}function kX(b,a,c){if(ed!="rxn"){return}if(!(b instanceof b8)){b=new b8(b,0)}if(!a){a=b.b1();

a.x+=kY}this.fz(new fy(b,a));
if(!c){this.kQ(co(b,a))}}function kZ(a){if(ed!="rxn"){return}var b=this;
if(b.fu){b.kz(T)}b.fu=a;
b.fu.fH=this;
b.fd(a_)}function k0(d,c,b,e){if(b==al){b=gR}if(e==al){e=gS}var a=d.ec,f;
if(!this.bG(a.fH)){return}if(!a.bG(c.ec)){this.gg(a,c.ec,T)}f=new ge(d,c,b,e);
a.fG(f);
return f}function k1(m,g){var e=m.k2,a=m.k3,h=e.ec,b=m.k4,d,c,f,k,j,l,i;
if(!this.bG(h.fH)){return}d=(m.eG?a.cY:a.cW);
c=(m.eG?a.cW:a.cY);
if(e.di!=2||a.di!=2){k=e.iF();
if(k||e.di!=a.di){j=a.iF();
if(e.di!=2&&k){e.iG(k)}if(a.di!=2&&j){a.iG(j)}}}if(!e.cW.h3.bG(a.cW.h3)){b.eB((en(e.cW,e.cY)-en(d,c))*af,a.dT());
b.ci(e.cW.cX.cn(d.cX));
l=e.cW.cX.cH(e.cY.cX);
i=d.cX.cH(c.cX);
if(l>0&&i>0&&l!=i){b.eA(l/i,e.cW.cX)}}if(!h.bG(a.ec)){if(b){bS(a.ec,b.fL)}this.gg(h,a.ec,T)}f=(g[e.cW]||g[e.cY]||g[d]||g[c]);
if(f==2||(!f&&e.g8()+e.cW.g8()+e.cY.g8()>a.g8()+d.g8()+c.g8())){h.gi(d,e.cW);
g[e.cW]=2;
h.gi(c,e.cY);
g[e.cY]=2;
h.ka(a,e)}else{h.gi(e.cW,d);
g[d]=1;
h.gi(e.cY,c);
g[c]=1;
h.ka(e,a)}if(b){b.fl(a);
b.fm(d);
b.fm(c)}}function k5(d,a,h){var i=d.k2,e=d.k3,j=i.ec,f=d.k4,c,l;
if(!this.bG(j.fH)){return}if(a){if(!i.h3){j.ip()}if(!i.h3.bG(e.h3)){f.ci(i.cX.cn(e.cX));
var b=i.gE(i.f2()),g=i.gv(),m=e.gE(e.f2()),k=e.gv();
if(b<k&&m<g&&(g>1||k>1)){c=new gb(gc(i,1));
l=new ge(i,c,1,0);
j.fC(c);
j.fG(l);
h=1;
i=c;
f.ci(e.cX.cn(c.cX))}else{if(m<g){h=2}else{if(b<k){h=1}}}}}if(!j.bG(e.ec)){if(f){bS(e.ec,f.fL)}this.gg(j,e.ec,T)}if(h==2||(!h&&i.g8()>e.g8())){j.gi(e,i)}else{j.gi(i,e)}if(f){f.fm(e)}}function ku(d,c){d.dQ();
c.dQ();
if(d.c2.x<c.c2.x){return -1}if(d.c2.x>c.c2.x){return 1}if(d.c2.y<c.c2.y){return -1}if(d.c2.y>c.c2.y){return 1}return 0}function kB(d,c){var e=d.dT(),f=c.dT();
if(e.x<f.x){return -1}if(e.x>f.x){return 1}if(e.y<f.y){return -1}if(e.y>f.y){return 1}return 0}function k6(){if(ed!="rxn"){return}this.kg=0;
var d=this,c,b,a;
if(d.fu){c=d.fu.dT()}for(b=0,a=bd(d.fL);
b<a;
b++){if(c&&d.fL[b].dT().x>=c.x){break}d.kg++}}function k7(){if(!this.fL||bd(this.fL)==0){return""}if(ed=="rxn"){for(var d=this,a,b,c=bd(d.fL)-1;
c>=0;
c--){if(!bd(d.fL[c].dS)){d.fL.splice(c,1)}}d.fL.sort(ku);
d.kr();
b="$RXN\n\n"+ab+S+Number(new Date())+"\n\n"+bo(d.kg,3)+bo(bd(d.fL)-d.kg,3)+"\n";
for(c=0,a=bd(d.fL);
c<a;
c++){b+="$MOL\n";
b+=d.fL[c].jW()}return b}else{return this.fL[0].jW()}}function k8(a){this.k9(a);
this.eU()}function k_(m){m=bm(m);
if(bk(m,"$RXN")){var c=this,k=m.split("$MOL\n"),h=k.shift(),g,f,o,d,a,l,n,j,b=0,e=0;
for(g=0,f=bd(k);
g<f;
g++){k[g]=unescape(k[g])}o=h.split("\n");
d=unescape(o[bd(o)-2]);
c.kg=bc(d.substr(0,3));
a=bc(d.substr(3,3));
l=bc(d.substr(6,3));
if(l>0){n=k.splice(c.kg+a);
k.splice(c.kg,0,n);
c.kg+=l}for(g=0,f=bd(k);
g<f;
g++){j=jY(k[g]);
if(!bd(j.dS)){if(e<c.kg){c.kg--
}continue}if(e==c.kg){c.la(b,al,T);
b+=kY+d0}else{if(e>0){c.kw(b,0,T);
b+=dt+d0}}j.cp();
j.jA(b);
c.fq(j);
b+=(j.c0.x-j.c2.x)+d0;
e++}if(g==c.kg){c.la(b)}}else{this.kg=1;
j=jY(m);
j.cp();
this.fq(j);
if(ed=="tmpl"&&this.dZ==aV){if($.isArray(j.aZ)){aZ.val(j.aZ.join(","))}if(j.a0!=al){a0.val(j.a0)}}}}function lb(){var d=this;
if(!d.c2||!d.c0){d.c2=new b8(an,an);
d.c0=new b8(-an,-an);
for(var c=0,b=bd(d.fL);
c<b;
c++){var a=d.fL[c];
a.dQ();
if(a.c0.x>d.c0.x){d.c0.x=a.c0.x}if(a.c2.x<d.c2.x){d.c2.x=a.c2.x}if(a.c0.y>d.c0.y){d.c0.y=a.c0.y}if(a.c2.y<d.c2.y){d.c2.y=a.c2.y}}}}function lc(d,a){if(!a){a=[]}else{if(bL(a,this)){return}}a.push(this);
if(d>a8&&d<bb&&d!=a_){var c=this,b;
if(c.dE.x>c.dD.x){b=c.dE;
c.dE=c.dD;
c.dD=b}}a.pop()}function ld(e,b){if(!b){b=[]}else{if(bL(b,this)){return}}var d=this,c,a;
b.push(d);
if(e>a9){delete d.fj}if(e>a8&&e<bb){d.le()}d.fL.sort(ku);
if(e!=a8&&e!=a_){e=ba}for(c=0,a=bd(d.fL);
c<a;
c++){d.fL[c].fd(e,b)}d.kr();
b.pop()}function lf(){delete this.c2;
delete this.c0}function lg(){return this.dZ}function lh(a){this.dZ=a;
this.dr()}function li(c){var e=this,b,d,a;
if(!e.fj){b=[];
for(d=0,a=bd(e.fL);
d<a;
d++){bN(b,e.fL[d].dq(c))}bN(b,e.ke);
if(e.fu){b.push(e.fu)}b.sort(e2);
e.fj=b}return e.fj}function lj(d){for(var e=this,b=[],c=0,a=bd(e.fL);
c<a;
c++){bN(b,e.fL[c].e9(d))}for(c=0,a=bd(e.ke);
c<a;
c++){b.push(e.ke[c].cX)}if(e.fu){b.push(e.fu.dE);
b.push(e.fu.dD)}return b}function lk(){for(var b=[],c=0,a=bd(this.fL);
c<a;
c++){bN(b,this.fL[c].dS)}return b}function ll(){for(var b=[],c=0,a=bd(this.fL);
c<a;
c++){bN(b,this.fL[c].dh)}return b}function lm(r,q,b){if(!r){return}if(q==al){q=jT}var h=r.x-q,c=r.x+q,g=r.y-q,a=r.y+q,f=r.z-b,t=r.z+b,e=[],m,l,k,d,p,o,n;
for(k=0,d=bd(this.fL);
k<d;
k++){p=this.fL[k];
for(m=0,l=bd(p.dS);
m<l;
m++){o=p.dS[m];
n=o.dT();
if(!o.dF&&!o.dO&&h<n.x&&n.x<c&&g<n.y&&n.y<a&&(b==al||(f<n.z&&n.z<t))){e.push(o)}}}return e}function ln(o,n){if(!o){return}if(n==al){n=lo}var f=o.x-n,b=o.x+n,e=o.y-n,a=o.y+n,d,k,h,g,c,l,p,m;
for(g=0,c=bd(this.fL);
g<c;
g++){l=this.fL[g];
for(k=0,h=bd(l.dh);
k<h;
k++){p=l.dh[k];
if(!p.dF&&!p.dO&&f<M.max(p.cW.cX.x,p.cY.cX.x)&&M.min(p.cW.cX.x,p.cY.cX.x)<b&&e<M.max(p.cW.cX.y,p.cY.cX.y)&&M.min(p.cW.cX.y,p.cY.cX.y)<a){m=o.eJ(p.cW.cX,p.cY.cX);
if(m<n){d=p;
n=m}}}}return d}function lp(n,m){if(!n){return}if(m==al){m=jT}var f=n.x-m,b=n.x+m,e=n.y-m,a=n.y+m,d=[],k,h,g,c,l,o;
for(g=0,c=bd(this.fL);
g<c;
g++){l=this.fL[g];
for(k=0,h=bd(l.h4);
k<h;
k++){o=l.h4[k];
o.dQ();
if(f<o.c0.x+o.hL&&o.c2.x<b&&e<o.c0.y&&o.c2.y<a){d.push(o)}}}return d}function lq(b,a){return lr(b,this.jU(b,a))}function ls(b,a){return lr(b,this.lt(b,a))}function lr(g,b){if(!b||!bd(b)){return}var d=b[0],f=d.dT().cH(g,T),e,c,a;
for(c=1,a=bd(b);
c<a;
c++){e=b[c].dT().cH(g,T);

if(e<f){d=b[c];
f=e}}return d}function lu(){return this.cX}function lv(a){return[this.cX]}function lw(a){return[this.dE,this.dD]}function fp(b,c){var a=this;
eL.apply(a);
a.dZ=b;
a.fL=[];
a.ke=[];
a.kg=0;
a.kh=new gY();
a.lx=lk;
a.ly=lq;
a.lz=ln;
a.lA=ls;
a.jU=lm;
a.lt=lp;
a.lB=ll;
a.fd=ld;
a.dQ=lb;
a.le=lf;
a.lC=kp;
a.kq=kt;
a.kr=k6;
a.ks=kA;
a.lD=k7;
a.lE=k8;
a.k9=k_;
a.js=k0;
a.lF=k5;
a.lG=k1;
a.kf=kO;
a.kw=kP;
a.ky=kN;
a.fz=kZ;
a.la=kX;
a.kz=kW;
a.fq=kn;
a.jK=km;
a.gg=kx;
a.kQ=kU;
a.kV=kM;
a.kG=kE;
a.kC=kF;
a.kD=kH;
a.kK=kI;
a.lH=kJ;
a.kv=kL;
a.jj=lI;
a.dq=li;
a.jJ=fi;
a.e9=lj;
a.ci=eM;
a.b1=kd;
a.eb=eZ;
a.cV=lg;
a.lJ=lh;
if(c){a.k9(c)}}function fy(c,a){var b=this;
eY.apply(b);
if(c.x>a.x){b.dE=a;
b.dD=c}else{b.dE=c;
b.dD=a}b.du=F;
b.fd=lc;
b.dT=kl;
b.e9=lw;
b.eU=dA;
b.dp=ff;
b.b1=kk;
b.cV=j0}function kj(a,c){var b=this;
eY.apply(b);
b.cX=new b8(a,c);
b.du=F;
b.fd=ie;
b.dT=lu;
b.e9=lv;
b.eU=ds;
b.dp=ff;
b.b1=ki;
b.cV=j0}function lK(){var c=this,h=st.dn(),a=h.fL,g,d,b,f,e,k;
for(d=0,b=bd(a);
d<b;
d++){g=a[d];
for(f=0,e=bd(g.dS);
f<e;
f++){c.fC(g.dS[f])}for(f=0,e=bd(g.dh);
f<e;
f++){c.fG(g.dh[f])}for(f=0,e=bd(g.h4);
f<e;
f++){c.hw(g.h4[f])}}k=h.fu;
if(k){c.fz(k)}for(d=0,b=bd(h.ke);
d<b;
d++){c.kf(h.ke[d])}}function lL(d){for(var c,b=0,a=bd(this.dS);
b<a;
b++){c=this.dS[b];
c.f9(d);
e4(c)}}function lM(){for(var c,b=0,a=bd(this.h4);
b<a;
b++){c=this.h4[b];
c.h0();
this.hJ(c)}}function lN(){var c=this,a=st.dn(),b;
while(bd(c.h4)){b=c.h4.pop();
b.ec.hJ(b)}while(bd(c.dh)){b=c.dh.pop();
b.ec.fl(b)}while(bd(c.dS)){b=c.dS.pop();
b.ec.fm(b)}if(c.fu){a.kz();
c.kz()}while(bd(c.ke)){a.ky(c.ke.pop())}}function lO(){var a=this;
return !bd(a.dS)&&!bd(a.h4)&&!bd(a.dh)&&!bd(a.ke)&&!a.fu}function lP(){var a=this;
while(bd(a.h4)){a.hJ(a.h4[0])}while(bd(a.dh)){a.fl(a.dh[0])}while(bd(a.dS)){a.fm(a.dS[0])}a.kz();
while(bd(a.ke)){a.ky(a.ke[0])}}function lQ(){var c=this,l=new b2(),g,f,d,b,e,m,k,h=[],a=[];
lR=c.b1(l,T);
for(g=0,f=bd(c.dh);
g<f;
g++){b=c.dh[g];
bY(h,b.cW);
bY(h,b.cY)}for(g=0,f=bd(c.hd);
g<f;
g++){b=c.hd[g];

bY(h,b.cW);
bY(h,b.cY)}for(g=0,f=bd(h);
g<f;
g++){b=h[g];
e=l.b0(b);
lR.fC(e,T);
m=b.ec;
k=l.bJ[m.bE];
if(!k){k=new fn();
l.bJ[m.bE]=k;
a.push(k)}k.fC(e,T)}if(lR.fL){bN(lR.fL,a)}else{lR.fL=a}for(g=0,f=bd(c.dS);
g<f;
g++){b=c.dS[g];
e=l.b0(b);
for(d=bd(b.dh)-1;
d>=0;
d--){if(!bL(c.dh,b.dh[d])){e=l.b0(b);
bS(l.b0(b.dh[d]),e.dh);
e.fd(ba)}}}for(g=0,f=bd(lR.dS);
g<f;
g++){lR.dS[g].du=al}for(g=0,f=bd(lR.dh);
g<f;
g++){lR.dh[g].du=al}for(g=0,f=bd(lR.hd);
g<f;
g++){lR.hd[g].du=al}for(g=0,f=bd(lR.h4);
g<f;
g++){lR.h4[g].du=al}lR.dr()}function lS(){var d=this.lT(),b,c,a;
for(c=0,a=bd(d);
c<a;
c++){if(b=d[c].ee){return b}}}function lU(){var c=this,b,a;
if(!c.fL){c.fL=[];
for(b=0,a=bd(c.dh);
b<a;
b++){bY(c.fL,c.dh[b].ec)}for(b=0,a=bd(c.dS);
b<a;
b++){bY(c.fL,c.dS[b].ec)}for(b=0,a=bd(c.h4);
b<a;
b++){bY(c.fL,c.h4[b].ec)}}return c.fL}function lV(){var c=this,b,a;
if(!c.jv){c.jv=[];
for(b=0,a=bd(c.dh);
b<a;
b++){bY(c.jv,c.dh[b].cW.h3);
bY(c.jv,c.dh[b].cY.h3)}for(b=0,a=bd(c.dS);
b<a;
b++){bY(c.jv,c.dS[b].h3)}for(b=0,a=bd(c.h4);
b<a;
b++){bY(c.jv,c.h4[b].h3)}}return c.jv}function lW(){this.copy();
this.lX()}function lY(b,a){var d=this,c=b.eh;
if(c&&!bL(d.h4,c)){return d.hw(c,a)}else{bY(d.dS,b);
if(!d.lZ){d.fd(ba);
b.du=T;
if(!a){e4(b)}}return T}}function l0(a){var b=this;
if(bS(a,b.dS)&&!b.lZ){b.fd(ba);
a.du=F;
b.jJ(a);
e4(a)}}function l1(d,c){bY(this.h4,d);
for(var e=this,b=0,a=bd(d.dS);
b<a;
b++){e.fC(d.dS[b],c)}for(b=0,a=bd(d.dh);
b<a;
b++){e.fG(d.dh[b],c)}for(b=0,a=bd(d.hd);
b<a;
b++){e.fG(d.hd[b],c)}if(!e.lZ){e.fd(ba);
d.du=T;
if(!c){e4(d)}}return T}function l2(c){var d=this,b,a;
if(bS(c,d.h4)&&!d.lZ){d.fd(ba);
c.du=F;
d.jJ(c);
e4(c)}for(b=0,a=bd(c.dS);
b<a;
b++){d.fm(c.dS[b])}for(b=0,a=bd(c.dh);
b<a;
b++){d.fl(c.dh[b])}for(b=0,a=bd(c.hd);
b<a;
b++){d.fl(c.hd[b])}}function l3(c,a){var d=this,b=c.eh;
if(b&&!bL(d.h4,b)){return d.hw(b)}else{if(bY(d.dh,c)){if(!d.lZ){d.fd(ba);
c.du=T;
if(!a){e4(c)}}return T}return F}}function l4(a){var b=this;
if(bS(a,b.dh)&&!b.lZ){b.fd(ba);
a.du=F;
b.jJ(a);
e4(a)}}function l5(b){for(var c=0,a=bd(b.dS);
c<a;
c++){this.fC(b.dS[c])}for(c=0,a=bd(b.dh);
c<a;
c++){this.fG(b.dh[c])}}function l6(b,a){this.fu=b;
if(!this.lZ){this.fd(ba);
b.du=T;
if(!a){e4(b)}}return T}function l7(){var a=this;
if(a.fu){if(!a.lZ){a.fd(ba);
a.fu.du=F;
e4(a.fu)}a.fu=al}}function l8(b,a){if(bY(this.ke,b)){if(!this.lZ){this.fd(ba);
b.du=T;
if(!a){e4(b)}}return T}return F}function l9(a){if(bS(a,this.ke)&&!this.lZ){this.fd(ba);
a.du=F;
e4(a)}}function l_(o,n,l){l=bu(l);
var c=this,k=st.dn(),a=k.fL,h,e,b,g,d,m,f;
for(e=0,b=bd(a);
e<b;
e++){h=a[e];
for(g=0,d=bd(h.dS);
g<d;
g++){f=h.dS[g];

if(!f.dO&&f.cX.cJ(o,n,l)){c.fC(f)}}for(g=0,d=bd(h.dh);
g<d;
g++){f=h.dh[g];
if(!f.dO&&f.dT().cJ(o,n,l)){c.fG(f)}}for(g=0,d=bd(h.h4);
g<d;
g++){f=h.h4[g];
if(!f.es&&f.dT().cJ(o,n,l)){c.hw(f)}}}m=k.fu;
if(m){if(m.dE.cJ(o,n,l)||m.dD.cJ(o,n,l)){c.fz(m)}}for(e=0,b=bd(k.ke);
e<b;
e++){f=k.ke[e];
if(f.cX.cJ(o,n,l)){c.kf(f)}}}function ma(n,m){var c=this,k=st.dn(),a=k.fL,h,e,b,g,d,l,f;
for(e=0,b=bd(a);
e<b;
e++){h=a[e];
for(g=0,d=bd(h.dS);
g<d;
g++){f=h.dS[g];
if(!f.dO&&f.cX.cL(n,m)){c.fC(f)}}for(g=0,d=bd(h.dh);
g<d;
g++){f=h.dh[g];
if(!f.dO&&f.dT().cL(n,m)){c.fG(f)}}for(g=0,d=bd(h.h4);
g<d;
g++){f=h.h4[g];
if(!f.es&&f.dT().cL(n,m)){c.hw(f)}}}l=k.fu;
if(l){if(l.dE.cL(n,m)||l.dD.cL(n,m)){c.fz(l)}}for(e=0,b=bd(k.ke);
e<b;
e++){f=k.ke[e];
if(f.cX.cL(n,m)){c.kf(f)}}}function mb(c){var f=this,b,e,d,a;
if(!f.fj){b=[];
for(d=0,a=bd(f.dS);
d<a;
d++){e=f.dS[d];
b.push(e);
if(!c){bX(b,e.dh)}}for(d=0,a=bd(f.dh);
d<a;
d++){e=f.dh[d];
bY(b,e);
if(!c){if(bY(b,e.cW)){bX(b,e.cW.dh)}if(bY(b,e.cY)){bX(b,e.cY.dh)}}}for(d=0,a=bd(f.h4);
d<a;
d++){e=f.h4[d];
b.push(e)}bO(b,f.fu);
bN(b,f.ke);
f.fj=b}return f.fj}function mc(d){var c=this,b=[],k=[],g,l,m,h,f,e,a;
for(h=0,f=bd(c.dS);
h<f;
h++){g=c.dS[h];
if(!d||!g.dO){k.push(g);
b.push(g.cX)}}for(h=0,f=bd(c.dh);
h<f;
h++){g=c.dh[h];
if((!d||!g.dO)&&!bL(c.dS,g.cW)&&!bL(c.dS,g.cY)){k.push(g.cW);
k.push(g.cY);
b.push(g.cW.cX,g.cY.cX)}}for(h=0,f=bd(c.h4);
h<f;
h++){g=c.h4[h];
if(g.eu){for(e=0,a=bd(g.eu);
e<a;
e++){b.push(g.eu[e].dE,g.eu[e].dD)}}if(!d){bO(b,g.fc);
bO(b,g.c2);
bO(b,g.c0)}if(d&&!g.es&&bd(g.he)){for(e=0,a=bd(g.he);
e<a;
e++){l=g.he[e];
if(!bL(k,l)){b.push(l.cX)}}}else{for(e=0,a=bd(g.dS);
e<a;
e++){l=g.dS[e];
if(!bL(k,l)){b.push(l.cX)}}}}m=c.fu;
if(m){b.push(m.dE,m.dD)}for(h=0,f=bd(c.ke);
h<f;
h++){b.push(c.ke[h].cX)}if(!d){bO(b,c.fc)}return b}function md(k,h){if(!k){k=new b2()}h=(h==al?this.lZ:h);
var d=this,c=new gY(h),b,f,a=[],g,e,l,j;
bH(k,d,c);
for(g=0,e=bd(d.h4);
g<e;
g++){b=d.h4[g];
f=k.b0(b);
c.hw(f,T);
l=b.ec;
j=k.bJ[l.bE];
if(!j){j=new fn();
k.bJ[l.bE]=j;
a.push(j)}j.hw(f,T)}for(g=0,e=bd(d.dh);
g<e;
g++){b=d.dh[g];
f=k.b0(b);
c.fG(f,T);
l=b.ec;
j=k.bJ[l.bE];
if(!j){j=new fn();
k.bJ[l.bE]=j;
a.push(j)}j.fG(f,T)}for(g=0,e=bd(d.hd);
g<e;
g++){b=d.hd[g];
f=k.b0(b);
bY(c.hd,f);
l=b.ec;
j=k.bJ[l.bE];
if(!j){j=new fn();
k.bJ[l.bE]=j;
a.push(j)}j.fG(f,T)}for(g=0,e=bd(d.dS);
g<e;
g++){b=d.dS[g];
f=k.b0(b);
c.fC(f,T);
l=b.ec;
j=k.bJ[l.bE];
if(!j){j=new fn();
k.bJ[l.bE]=j;
a.push(j)}j.fC(f,T)}if(d.fu){c.fz(k.b0(d.fu),T)}for(g=0,e=bd(d.ke);
g<e;
g++){c.kf(k.b0(d.ke[g]),T)}if(c.fL){bN(c.fL,a)}else{c.fL=a}for(g=0,e=bd(c.fL);
g<e;
g++){j=c.fL[g];
j.g1=al;
j.ip()}if(d.fc){c.fc=d.fc.b1()}c.hs=d.hs;
c.dr();
return c}function me(h,b){var g=this,f,e=st.dn(),d,c,a;
if(!b){b=[]}else{if(bL(b,g)){return}}b.push(g);
if(h>a9){if(h!=a_){g.fL=al;
g.jv=al}g.fc=al;
g.fj=al}if(h!=a_){f=g.lT();

for(c=0,a=bd(f);
c<a;
c++){f[c].fd(ba,b)}if(d=g.fu){d.fd(h,b)}}e.fd(h,b);
b.pop()}function mf(d,a,b,c){this.k4=b;
this.k2=d;
this.k3=a;
this.cH=c}function mg(h,k){var b=[],l=h.lx(),m,g,f,d,e,a,c;
bQ(l,this.dS);
for(e=0,a=bd(l);
e<a;
e++){c=l[e];
if(!c.eh){for(g=0,f=bd(this.dS);
g<f;
g++){d=this.dS[g];
if(!d.eh){m=c.cX.cH(d.cX,T);
if(m<=k){b.push(new mf(c,d,this,m));
break}}}}}return b}function mh(m,n){var e=this,d=[],p=m.lB(),b,a,o,l,k,g,h,c,f;
bQ(p,e.dh);
for(h=0,c=bd(p);
h<c;
h++){f=p[h];
if(f.cW.eh||f.cY.eh){continue}for(l=0,k=bd(e.dh);
l<k;
l++){g=e.dh[l];
if(g.cW.eh||g.cY.eh){continue}if((b=f.cW.cX.cH(g.cW.cX,T))<=n&&(a=f.cY.cX.cH(g.cY.cX,T))<=n){d.push(new mf(f,g,e,0.5*(b+a)));
break}if((b=f.cW.cX.cH(g.cY.cX,T))<=n&&(a=f.cY.cX.cH(g.cW.cX,T))<=n){o=new mf(f,g,e,0.5*(b+a));
o.eG=T;
d.push(o);
break}}}return d}function mi(b,a){if(!a){a=this.dT().b1()}fe.apply(this,arguments)}function gY(a){var b=this;
eL.apply(b);
b.lZ=a;
b.dS=[];
b.h4=[];
b.dh=[];
b.hd=[];
b.ke=[];
b.fd=me;
b.fQ=lO;
b.lX=lN;
b.jq=lP;
b.cut=lW;
b.copy=lQ;
b.lT=lU;
b.mj=lV;
b.mk=lS;
b.ml=lL;
b.ungroupGroups=lM;
b.dq=mb;
b.jJ=fi;
b.e9=mc;
b.eA=mi;
b.mm=mg;
b.mn=mh;
b.addAll=b.bN=lK;
b.addRectSelection=l_;
b.mo=ma;
b.fC=lY;
b.fm=l0;
b.hw=l1;
b.hJ=l2;
b.fG=l3;
b.fl=l4;
b.kf=l8;
b.ky=l9;
b.fz=l6;
b.kz=l7;
b.fq=l5;
b.b1=md}function mp(){var b="",A=fR[H].m,f=fR[H].fU,n=st.gh(),a=bd(n.dS),c={},o="",l=0,r=0,y={},u="",k=0,v=0,z,m,w,h,t,p,q,x,e=st.dn().lx(),d,g;
n.hd=[];
n.hs=T;
for(t=0,p=bd(e);
t<p;
t++){d=e[t];
if(!d.du){z=d.eh;
m=(z&&z.type==as&&z.hh)||1;
if(y){k+=m*d.g7(F);
v+=m*d.g7(T);
y[d.df]=bu(y[d.df])+m;
h=d.eq();
y[H]=bu(y[H])+(m*h);
k+=m*A*h;
v+=m*f*h}if(z){if(z.type==as&&!z.hh){k=al;
v=al;
y=al;
u=s("poly");
break}}}}for(t=0,p=a;
t<p;
t++){d=n.dS[t];
z=d.eh;
m=(z&&z.type==as&&z.hh)||1;
if(c){l+=m*d.g7(F);
r+=m*d.g7(T);
c[d.df]=bu(c[d.df])+m;
h=d.eq();
c[H]=bu(c[H])+(m*h);
l+=m*A*h;
r+=m*f*h}if(w){if(!w.bG(d.h3)){n.hs=F}}else{w=d.h3}if(z){n.hs=F;
if(z.type==as&&!z.hh){l=al;
r=al;
c=al;
o=s("poly")}}for(q=0,x=bd(d.dh);
q<x;
q++){if(!d.dh[q].du){n.hd.push(d.dh[q])}}}for(t=0,p=bd(n.dh);
t<p;
t++){g=n.dh[t];
if(w){if(!w.bG(g.cW.h3)){n.hs=F}}else{w=g.cW.h3}if(g.eh){n.hs=F}if(!g.cW.du||!g.cY.du){n.hd.push(g)}}n.hs=(n.hs&&a>0&&bd(n.hd)<=2);
if(c){o=mq(c)}if(y){u=mq(y)}mr($("#bondRotate"),bd(n.hd)==1);
mr($("#groupSelection"),n.hs);
mr($("#ungroupSelection"),bd(n.h4));
if(a){b+=s("sele")+":&nbsp;"+o+ms(l,r);
if(u){b+=S+s("rem")+":&nbsp;"+u+ms(k,v)}}$("#info").html(b)}function ms(b,a){if(b>0){return"&nbsp;("+round(b,2,3)+"/"+round(a,4,3)+")"}return""}function mq(h){var f,b,a=[C,H],d,e,g,c="";
bf(h);
for(f=0,b=bd(a);
f<b;
f++){d=a[f];
e=h[d];
if(e>0){c+=d;
if(e>1){c+=aE+e+aF
}}}for(d in h){e=h[d];
g=fR[d];
if((!g||!g.fT)&&e>0){c+=d;
if(e>1){c+=aE+e+aF}}}return c}function dn(){var a=this;
if(a.mt){return a.mt}a.mu=bx(a.mu,0,bd(a.mv)-1);
return a.mv[a.mu]}function gh(){return this.dn().kh}function gM(){return this.mw}function mx(a){this.mw=a}function my(){if(this.mw){this.mw.mz=al;
this.mw.mA=al;
this.mw=al}}function mB(){if(this.mC()){this.mD();
resetDirty(aV);
this.mu--;
mE(aV);
this.dn().eU();
mp()}}function mF(){return this.mu>0}function mG(){if(this.mH()){this.mD();
resetDirty(aV);
this.mu++;
mE(aV);
this.dn().eU();
mp()}}function mI(){return this.mu<bd(this.mv)-1}function mJ(){var a=bd(this.mv)-mK;
if(a>0){this.mv.splice(0,a);
this.mu-=a}}function mL(){var a=this;
a.mJ();
a.mv.splice(a.mu,0,st.dn().b1(new b2(T)));
a.mu++;
a.mv.length=a.mu+1}function mM(a){var b=this;
b.mJ();
b.mu++;
b.mv[b.mu]=a;
b.mv.length=b.mu+1}function mN(){var b=this,a=b.mv[b.mu];
b.mv[b.mu]=a.b1(new b2(T));
b.mt=a}function mO(){return !!this.mt}function mD(){var a=this;
if(a.mt){a.mt.dj();
a.mt=al;
a.my();
a.dn().eU()}}function mP(){var a=this;
if(a.mt){a.mM(a.mt);
a.mt=al;
a.my();
mp()}}function mQ(){var a=this;
a.mv=[];
a.mv[0]=new fp(aV);
a.mu=0;
a.gL=F;
a.mN=mN;
a.mO=mO;
a.mD=mD;
a.mP=mP;
a.dn=dn;
a.gh=gh;
a.gM=gM;
a.mx=mx;
a.my=my;
a.mJ=mJ;
a.mL=mL;
a.mM=mM;
a.undo=mB;
a.mC=mF;
a.redo=mG;
a.mH=mI}function mR(a){$("#"+a).click()}function activateTool(d,b){mS();
mT(gN,b);
if(gN!=b){mU=F;
var a=F;
switch(b){case aQ:case aR:mV();
a=T;
break;
case aT:case aU:a=T;
break;
case aL:mU=T;
break}if(!a){$(mW).css({border:"",d0:""});
$(d).css({border:"1.5px solid black",d0:"0.5px"});
mW=d}gN=b}else{if(gQ&&b==aP){var c=st.gh();
if(!c.fQ()){mX()}}}hX()}function useAtom(a){mY(a);
$("#atom").click()}function mT(b,a){switch(b){case aQ:case aR:gP=F;
st.mD();
break}}function mZ(){m0(mW)}function m0(a){if(a){$(a).trigger("click",{m1:T})}}function m2(a){m3=a.ctrlKey;
return ey(a)}function m4(c){if(!st.gL){var a=new FileReader(),b;
a.onload=function(e){var d=e.target.result;
if(m3){activateTool(al,aQ);
m5(new fp(aV,d))}else{lE(d)}};
if(c.dataTransfer){b=c.dataTransfer.files}else{if(c.target){b=c.target.files}}if(b){a.readAsText(b[0]);
return ey(c)}}}function m6(b,a){if(b&&(!a||!a.m1)){m7=b.target}}function m8(a){m7=al}function m9(d){if(!d||!d.data||!d.data.m1){m6(d);

var c=$(m7).parent().children(at),a=aV.height,b=c.height();
c.fadeIn(50).css("z-index",10000);
c.css(c.offset().top+b>a?{position:"absolute",top:(a-b-25)+"px"}:{position:al,top:al})}}function m_(a){setTimeout(function(){if(!a){m8()}var b=$(at).filter(":visible");
if(bd(b)){if(m7){b=b.not($(m7).parent().children())}if(bd(b)){if(na){b.hide()}else{b.fadeOut(100)}}}if(gQ&&!bd(b)){m9()}},100)}function nb(a){if(a.target.tagName.toLowerCase()=="img"){a3.prop("src",a.target.src);
a4=T;
nc()}}function mV(){a4=F;
nd()}function nc(){if(a4){a3.show()}}function nd(){if(a4){a3.hide()}}function ne(){var b=navigator.userAgent.toLowerCase(),a="";
if(/android|blackberry|kindle|mobile|phone/.test(b)){a="mobile"}else{if(/windows|macintosh|linux/.test(b)){a="desktop"}else{if(/Pad|Tablet/.test(navigator.userAgent)){a="mobile"}else{if(/CrOS|Mac/.test(navigator.userAgent)){a="desktop"}else{a=(nf()?"mobile":"desktop")}}}}return a}function nf(){return"ontouchstart" in document.documentElement}function setBond(a,b){gR=a;
gS=b}function hu(){hW(aV);
st.mL()}function hx(a){hX(T);
e7(a);
mp()}function ng(h){for(var b=aY.val(),g,d,c="",f=0,a=bd(b);
f<a;
f++){g=b.charCodeAt(f);
if((!d&&g>96&&g<123)||(g==104&&b!="Ph"&&b!="Rh"&&b!="Th")){g-=32}d|=(g>64&&g<91);
c+=String.fromCharCode(g)}if(b!=c){mY(c)}}function nh(d){if(ni){ht(F);
return}if(nj(aZ,d)||nj(a0,d)){return T}nk=T;
var c=d.which,b,a;
if(nj(aY,d)&&c!=13){if(!d.shiftKey&&((((a=aY.val())==""||!isNaN(bc(a)))&&c>64&&c<91)||(c==72&&a!="P"&&a!="R"&&a!="T"))){mY(a+String.fromCharCode(c));
return F}return T}b=(d.altKey?0.2:1);
switch(c){case 37:nl(-b,0);
break;
case 38:nl(0,-b);
break;
case 39:nl(b,0);
break;
case 40:nl(0,b);
break;
case 74:case 36:nl(0,0,b);
break;
case 75:case 35:nl(0,0,-b);
break;
case 33:nm();
nn();
break;
case 34:no();
nn();
break}m_();
return ey(d)}function nj(a,b){return a&&b&&a.is(b.target)}function np(a){return(nj(aY,a)||nj(aZ,a)||nj(a0,a)?T:ey(a))}function ht(a){if(a){ni=T}else{clearTimeout(nq);
nq=setTimeout(function(){ni=F},500)}}function nr(h){if(st.gL||ni){ni=F;
return}if(nj(aZ,h)||nj(a0,h)){return T}if(nj(aY,h)){if(h.which==27||h.which==113){aY.blur()}if(h.which!=13){return T}}var f=h.which,a,d=h.ctrlKey,b=h.altKey,g=(!d&&!h.shiftKey&&!b),c=st.gh();
switch(f){case 13:if(eg){hu();
eg.f9(gO());
e4(eg);
hx(aV)}else{if(!c.fQ()){hu();
c.ml(gO());
hx(aV)}}break;
case 27:eg=al;
hV=al;
if(gP){ns=T;
gP=F;
st.mD();
hW(aV)}else{st.my();
clearSelection()}mZ();
break;
case 46:if(c.fQ()){mR("deleteButton")}else{mX()}break;
case 49:case 97:mR("single");
break;
case 50:case 98:mR(d?"clean2D":"double");
break;
case 51:case 99:mR(d?"clean3D":"triple");
break;
case 65:if(d){hu();
c.bN();
hx(aV)}else{mR(aG)}break;
case 67:if(d){copy()}else{if(g){a=T}}break;
case 68:mR("singleDown");
break;
case 69:mR(aK);
break;
case 71:if(d){if(h.shiftKey){doUngroup()}else{createGroup()}}break;

case 76:if(g){a="Cl"}break;
case 77:mR("singleEither");
break;
case 66:case 70:case 72:case 73:case 78:case 80:if(g){a=T}break;
case 79:if(d&&b){$("#fileUpload").click()}else{if(g){a=T}}break;
case 81:mR(aL);
break;
case 82:if(g){a="Br"}break;
case 83:if(d&&b){saveFile()}else{if(g){a=T}}break;
case 84:mR("3d_rotate");
break;
case 85:if(d){doUngroup()}else{mR("singleUp")}break;
case 86:if(d){paste()}else{mR(aM)}break;
case 87:mR(aI);
break;
case 88:if(d){cut()}break;
case 89:if(d){st.redo()}break;
case 90:if(d){st.undo()}break;
case 107:case 171:case 187:if(eg){hu();
eg.g5(1);
e4(eg);
hx(aV)}break;
case 109:case 173:case 189:if(eg){hu();
eg.g5(-1);
e4(eg);
hx(aV)}break;
case 110:case 190:if(eg){hu();
eg.g6();
e4(eg);
hx(aV)}break;
case 113:aY.focus().select();
break}if(a){if(a===T){a=String.fromCharCode(f)}mY(a);
if(eg){hu();
eg.f9(gO());
e4(eg);
hx(aV)}}return ey(h)}function nt(b){var a=1/hK;
return new b8((b.x-0.5*nu.x)*a+nv.x,(b.y-0.5*nu.y)*a+nv.y)}function nx(a){var b=aW.offset();
return nt(new b8(a.pageX-b.left,a.pageY-b.top))}function ny(b,a){if(a){nz=[];
nA="M"+b;
nB={x:b.x,y:b.y,x2:b.x,y2:b.y}}else{nA+="L"+b;
nB.x=M.min(nB.x,b.x);
nB.x2=M.max(nB.x2,b.x);
nB.y=M.min(nB.y,b.y);
nB.y2=M.max(nB.y2,b.y)}nz.push(b)}function nC(){return(eg?eg.ec:(nD?nD.ec:(hV?hV.ec:al)))}function mS(){eg=nD=hV=kR=kT=al}function nE(b){if(parent){parent.postMessage("focused","*")}if(gP||b.which!=1||st.gM()){return}m_();
nF(b);
gP=T;
ns=F;
nG=eg;
nH=nD;
nI=hV;
nJ=kT;
nK=kR;
nL=F;
var d=nx(b),a,c;
ny(d,T);
if(!st.gL){switch(gN){case aK:case aL:case aT:case aI:case aG:case aH:case aP:case aJ:st.mN();
break;
case aM:case aN:case aO:a=st.gh();
st.mN();
if(a.fQ()){a=new gY(T);
if(c=nC()){a.fq(c)}else{a.bN()}}mS();
st.mx(a);
break}}if(!st.gL){return ey(b)}}function nM(c,d,b,a){if(d4){nN(c,d,b,a)}else{nO+=b;
nP+=a;
if(nQ){clearTimeout(nQ)}nQ=setTimeout(function(){nN(c,d,nO,nP);
nO=0;
nP=0},500)}return ey(c)}function nN(d,h,c,a){var g=nx(d),f,j,k,b,i;
if(st.gL||d.ctrlKey){if(a<0){zoomOut()}else{zoomIn(co(g,nv))}}else{if(d.shiftKey){f=(d.altKey?0.5:2.5);
if(d.ctrlKey){nl(-a*f,c*f)}else{nl(c*f,-a*f)}}else{if(!(j=st.gM())){hu();
j=st.gh();
if(j.fQ()){j=new gY(T);
j.bN()}}f=-M.PI*a/(d.altKey?ae:12);
if(gN==aO){i=j.hd[0];
k=(i.cW.du?i.cW:i.cY);
b=(i.cW.du?i.cY:i.cW);
j.eP(f,k.cX.b1(),b.cX)}else{k=j.mk();
j.eB(f,(k?k.cX.b1():al))}}}mS();
hW(aV);
hX();
nR()}function nS(y){m_();
if(st.gL&&y.which!=1){nT()}else{if(y.which==1&&!ns){nF(y);
var f=nU,q=nz[0],b=st.dn(),z,n,t,c,w,u,l,o,x,d,j,r,h,k,g,p,m,v={},a=(st.gL?aU:gN);

if((nL||!y.ctrlKey)&&(z=st.gM())){t=z.mn(b,nV);
for(w=0,u=bd(t);
w<u;
w++){b.lG(t[w],v)}c=z.mm(b,nV);
for(w=0,u=bd(c);
w<u;
w++){b.lF(c[w],u==1)}n=z.lT();
nW(n);
for(w=0,u=bd(n);
w<u;
w++){b.fq(n[w])}b.lC();
z.fd(a8);
st.mP()}else{if(!nL&&y.ctrlKey&&(l=(eg||nD))){switch(a){case aP:b.jK(l.ec);
st.mP();
break;
default:o=st.gh();
if(!y.shiftKey){o.jq()}o.fq(l.ec);
st.mP()}}else{switch(a){case aU:if(nL){zoomBox(q,f)}else{zoomIn(f)}break;
case aM:case aN:case aO:st.mP();
break;
case aK:case aL:if(!z){o=st.gh();
if(!y.shiftKey){o.jq()}x=0;
if(!nL){x=3;
if(nD){o.fG(nD)}if(kT){o.fz(kT)}if(kR){o.kf(kR)}}if(a==aK){o.addRectSelection(q,f,x)}else{ny(f);
ny(q);
o.mo(nz,nB)}}st.mP();
break;
case aS:if(!hV){hu();
d=b.kw(f);
e4(d);
hx(aV)}break;
case aT:if(hV){st.mD()}else{if(!nL){f.x+=kY}b.la(q,f);
e4(b);
st.mP();
mZ()}break;
case aI:if(nD&&!eg&&!nL){nD.iE();
st.mP()}else{r=F;
if(nG){j=nG.ec;
if(!nG.eh&&nG.bG(eg)){f=gc(nG,1);
k=new gb(f);
g=new ge(nG,k,1,0);
j.fC(k);
j.fG(g);
k.f9(gO());
e4(nG);
hW(aV);
st.mP();
break}}else{if(ed=="rxn"||!bd(b.fL)){j=new fn();
b.fq(j);
r=T}else{j=b.fL[0]}}if((!nG||!nG.eh)&&(!eg||!eg.eh)&&jn(y,q,f,j,nG,eg)){if(r){b.kq();
b.kr()}st.mP()}else{st.mD()}}break;
case aG:if(eg){eg.f9(gO());
e4(eg);
st.mP();
break}case aH:if(nD&&!eg&&!nL){nD.iE();
st.mP()}else{if(hV){st.mD()}else{if((nH&&!nG)||(nG&&nG.eh)||(eg&&eg.eh)){st.mD()}else{p=gO();
gd.fP();
h=nG;
k=eg;
if(h&&k&&!k.bG(h)){if(g=h.g3(k)){g.iE()}else{h.ec.fH.js(h,k)}}else{if(k&&k.bG(h)){nL=F;
k=al}if(!nL){f=al}r=F;
m=[];
if(ed!="rxn"){j=b.fL[0]}else{if(h){j=h.ec}else{if(k){j=k.ec}}}if(!j){j=new fn();
b.fq(j);
r=T}if(!h){h=new gb(q.b1());
j.fC(h);
m.push(h)}if(!k&&(nL||nG||(a==aH&&p==C))){k=new gb(gc(h,gR,f,y));
j.fC(k);
m.push(k)}j.fG(new ge(h,k,gR,gS));
for(w=0,u=bd(m);
w<u;
w++){m[w].f9(p)}if(r){b.kq();
b.kr()}}st.mP();
gP=F;
hW(aV);
hX(T)}}}break;
case aP:if(hV){hV.ec.hJ(hV);
hV=al}else{if(eg){eg.ec.fm(eg);
eg=al}if(nD){nD.ec.fl(nD);
nD=al}if(kT){kT.fH.kz(kT);
kT=al}if(kR){kR.fH.ky(kR);
kR=al}}st.mP();
break;
case aJ:if(eg){j=eg.ec;
if(j&&!eg.bG(j.ee)){e4(j.ee);
j.ee=eg;
e4(eg);
st.mP()}else{st.mD()}}break}}}gP=F;
if(a==aQ){if(nX){nY(y,y.pageX,y.pageY)}else{mZ()}}nR()}}}function nZ(g,i){var a={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},d=g.originalEvent,f=d.changedTouches,b=a[d.type],h,c;

if(b){if(i||bd(f)==1){h=f[0];
c=document.createEvent("MouseEvent");
c.initMouseEvent(b,true,true,window,1,h.screenX,h.screenY,h.clientX,h.clientY,false,false,false,false,0,null);
h.target.dispatchEvent(c);
d.preventDefault();
if(b=="mouseup"&&!nL){c=document.createEvent("MouseEvent");
c.initMouseEvent("click",true,true,window,1,h.screenX,h.screenY,h.clientX,h.clientY,false,false,false,false,0,null);
h.target.dispatchEvent(c)}return T}return F}}function hM(a){if(a){a.remove();
a.clear()}}function hW(a){if(!a){return}hM(a.jr);
if(!hV){hM(a.hN)}if(!eg){hM(a.fw)}}function hX(e){var d=st.dn(),a=d.ly(nU),c=d.lA(nU),b;
if(eg&&(e||!eg.bG(a))){eg.hb();
e4(eg);
n0("outAtom",eg)}if(hV&&(e||!hV.bG(c))){hV.hb()}if(!a){eg=al;
b=d.lz(nU);
if(nD&&(e||!nD.bG(b))){n0("outBond",nD)}if(b&&(e||!b.bG(nD))){n0("overBond",b)}nD=b;
if(b){e4(b)}}else{if(e||!a.bG(eg)){eg=a;
if(nD){e4(nD);
n0("outBond",nD);
nD=al}eg.ha();
e4(eg);
n0("overAtom",eg)}}if(!c){hV=al}else{if(e||!c.bG(hV)){hV=c;
hV.ha()}}}function n0(a,b){$(window).trigger(a,{obj:b})}function nF(b){m3=b.ctrlKey;
var a=b.clientX,c=b.clientY;
if(gQ){a2.css({left:a-4,top:c-4})}a3.css({left:a+30,top:c+30});
nU=nx(b);
hW(aV);
if(!eg){gd.fP()}hX()}function n1(b,a,c){if(d4){n2(b,a,c)}else{clearTimeout(n3);
n3=setTimeout(function(){n2(b,a,c)},250)}}function n2(h,p,n){nF(h);
aW.css("cursor","");
var o,c,j,l,b,q,t,m,d,a,r,g,f,k=(st.gL?aU:gN);
if(gP){o=nU;
c=nz[0];
j=st.dn();
if(mU){ny(o)}if(!nL){nL=(o.cH(c)>n4);
if(nL){switch(k){case aK:case aL:if((nG&&nG.du)||(nH&&nH.du)||(nJ&&nJ.du)||(nK&&nK.du)){l=st.gh()}else{l=new gY(T);
if(nG){l.fC(nG)}else{if(nH){l.fG(nH)}else{if(nI){l.hw(nI);
hV=al;
hW(aV)}else{if(nJ){l.fz(nJ)}else{if(nK){l.kf(nK)}}}}}}if(!l.fQ()){st.mx(l)}break}}}if(l=st.gM()){switch(k){case aM:case aO:if(nL){b=bu(l.mA);
q=M.atan2(o.y-c.y,o.x-c.x);
if(k==aO){r=l.hd[0];
t=(r.cW.du?r.cW:r.cY);
m=(r.cW.du?r.cY:r.cW);
l.eP(q-b,t.cX.b1(),m.cX)}else{l.eB(q-b,c)}l.mA=q;
l.eU();
aV.jr.push(aV.path("M"+c+"L"+o).attr(ax,"#f00").attr(az,c3),aV.text(o.x,o.y+30/hK,round(q*ag,1)+"").attr(aw,2+20/hK))}break;
case aN:if(nL){b=(l.mz||c);
l.mz=o;
q=(h.altKey?0.01:0.1);
l.eC(q*(b.y-o.y),q*(o.x-b.x),l.dT())}break;
default:n5(c,o,j,aV)}}else{switch(k){case aU:case aK:n6(aV,c,o);
break;
case aL:aV.jr.push(aV.path(nA+"Z").attr(n7));
break;
case aI:if((!nG||!nG.eh)&&(!eg||(!eg.eh&&!eg.bG(nG)))){jn(h,c,o,al,nG,eg)}break;
case aG:case aH:if(nL&&!nH&&(!nG||!nG.eh)&&(!eg||(!eg.eh&&!eg.bG(nG)))){gd.fP();
t=nG;
m=eg;
d=[];
if(t&&(r=t.g3(m))){r=gd.fG(r);
r.iE()}else{a=gO();
if(!t){t=gd.fC(new gb(c.b1()));

d.push(t)}if(!m){m=gd.fC(new gb(gc(t,gR,o,h)));
d.push(m)}gd.fG(new ge(t,m,gR,gS));
for(g=0,f=bd(d);
g<f;
g++){d[g].f9(a)}}gd.eU()}break;
case aT:if(nL){gd.fO(c,o);
gd.eU()}break;
case aP:if(eg){eg.ec.fm(eg);
eg=al}if(nD){nD.ec.fl(nD);
nD=al}break}}}else{if(nD){switch(k){case aG:aW.css("cursor","move");
break;
case aH:e4(nD);
var r=gd.fG(nD);
r.iE();
gd.eU();
break}}}switch(k){case aK:case aL:if(eg||nD){aW.css("cursor","move")}break}nR()}function n6(d,c,e){var b=M.min(c.x,e.x),a=M.min(c.y,e.y);
d.jr.push(d.rect(b,a,M.abs(e.x-c.x),M.abs(e.y-c.y)).attr(n7))}function n5(b,j,g,c){var h=st.gM(),m,l,d,a,n,k,f,e;
if(!h||st.gL){return}m=(h.mz||b);
l=j.cn(m);
h.ci(l.x,l.y);
h.mz=j;
if(g){d=h.mm(g,1.5*nV);
for(f=0,e=bd(d);
f<e;
f++){a=d[f];
n=a.k3.cX;
k=a.k2.cX;
c.jr.push(c.ellipse(n.x,n.y,nV,nV).attr(n8).attr(aD,a.cH<nV?n9:n_));
c.jr.push(c.ellipse(k.x,k.y,nV,nV).attr(n8).attr(aD,a.cH<nV?n9:n_))}}}function oa(c,d,b){var a="templates/"+b+".mol";
jQuery.get(a,{},function(e){d.push(new ob(a,e,c));
oa(c,d,b+1)},"text")}function oc(){od.server=[];
var a=$("#builtinTemplates").remove(".template");
if(!by("noTemplates")){oa(a[0],od.server,0)}}function addTemplate(b,e){var d,a,c=$(e?"#tmpl"+e:"#serverTemplates"),f=od.server;
if(!c.length){$("<tr>").append($("<td>").addClass("menuWithPopup").mouseleave(m_).click(m_).append(c=$("<div id="+bs("tmpl"+e)+' class="menuPopup templatesMenu">'+getImgSt("del")+' class="button" style="float:right" onClick="hideMenu();"/></div>').css({opacity:0.85}).mouseleave({obj:this},oe).click(m8)).append($(getImgSt(e)+' class="button"/>').mouseenter(m9).click(m6))).insertBefore("#groupSelection")}if($.isArray(b)){for(d=0,a=bd(b);
d<a;
d++){f.push(of(b[d],c))}}else{f.push(d=of(b,c));
return d}}function of(a,b){return new ob(al,a,b)}function f_(b){if(!b){return}b=b.charAt(0).toUpperCase()+b.substr(1);
for(var d,c=0,a=bd(od.server);
c<a;
c++){d=od.server[c];
if(d.ee&&$.inArray(b,d.og)!=-1){return d}}}function oh(){if(this.url){jQuery.get(this.url,{},function(a){this.fH=new fp(this.c8,a);
this.eU()},"text")}}function oi(){var h=this,f=h.fH,e,b,a,g,d=j4,c=j4;
for(e=0,b=bd(f.fL);
e<b;
e++){a=f.fL[e];
if(!h.ee){h.ee=a.ee}if(!h.tooltip){h.tooltip=a.a0}if(!$.isArray(h.og)){h.og=a.aZ}}g=bv(h.tooltip);
if(h.og&&bd(h.og)){g+=" ("+h.og.join(",")+")"}h.oj.attr("title",g);
f.dQ();
d+=M.max(ok-f.c0.x+f.c2.x,0);
c+=M.max(ok-f.c0.y+f.c2.y,0);
h.c8.setViewBox(f.c2.x-d,f.c2.y-c,f.c0.x-f.c2.x+2*d,f.c0.y-f.c2.y+2*c);
h.ol.show();
f.eU();
h.ol.hide()}function nW(c){for(var b=0,a=bd(c);
b<a;
b++){e4(c[b].ee);
c[b].ee=al}}function om(b,a,c){nX=F;
on=b.data.obj;
nY(b,a,c);
oe();
setTimeout(m_,700)}function oo(b,a,c){nX=T}function nY(b,a,c){op();
n1(b,a,c)
}function op(){activateTool(al,aQ);
m5(on.fH.b1(),on.ee)}function m5(c,b){st.mN();
var e=c.fL,g=st.dn(),d,a,f=new gY(T);
c.lJ(aV);
for(d=0,a=bd(e);
d<a;
d++){g.fq(e[d],F,T);
f.fq(e[d])}gP=T;
nz[0]=(b?b.cX:f.dT());
st.mx(f)}function oq(c){var b=c.data.obj,a=$(b.oj[0].firstChild).clone().attr("width",or).attr("height",or);
$("#overlay").empty().append(a).show().mouseenter(function(){$(".templatesMenu").hide()})}function oe(){var a=$("#overlay");
if(os){a.hide()}else{a.fadeOut()}}function ga(){var a=new b2();
this.fH.b1(a);
return a.b0(this.ee)}function ob(b,a,c){var f=this,e,d=(gQ?33:50);
f.url=b;
f.ol=(c.show?c:a1);
f.oj=$("<div>").css({display:"inline-block"}).addClass("button template").appendTo(c).click({obj:f},om).dblclick({obj:f},oo).mouseenter({obj:f},oq);
f.c8=new Raphael(f.oj[0],ot,ou);
bD.apply(f.c8);
mE(f.c8);
f.fH=new fp(f.c8,a);
if(e=f.fH.fL[0]){e=bv(e.a0).substr(0,12);
f.oj.append($("<div>").css({position:"absolute",top:0,height:"100%",padding:"25% 3px","background-color":"white",opacity:0.3,"font-size":(bd(e)>6?d:d*2)+"%"}).text(e))}f.ga=ga;
f.reload=oh;
f.eU=oi;
f.eU()}var isReady=F,lang=bt(by("lang"),"en"),bB=["en","de"],langDef={},ov=(typeof nw!="undefined"),ow=!!by("embedded"),d4=Raphael.svg,ox=$.browser.msie,os=(ox&&$.browser.version<=8),gQ=(ne()=="mobile"),iconSize=(gQ?35:20),na=(os||$.browser.opera),nv=new b8(),hK,oy=1000,oz=0.001,oA=0.25,hZ=16,nu,st,lR,gd,gN,gR=1,gS=0,ed=bt(by("mode"),"mol"),em=!!by("debug"),ns=F,m3,nU,m7,eg,hV,nD,kR,kT,gP=F,ni=F,nq,n3,nQ,nO=0,nP=0,nL,mU=F,nz=[],nA="",nB={},nG,nI,nH,nK,nJ,oB=4,n4=3,mW,on,nX=F;
bA();
var mK=30,i_=12,jp=30,ot=50,ou=50,ep=10,c1=ep*1.4,c_=2,c5=1.5,c4=0.06,c7=0.01,d0=1.5*ep,dt=7,kY=55,dB=7,dC=0.2,hA=0.5,nV=0.25*ep,oC=0.1,eo=0.38,c3=(d4?0.333333333:1),dx=1,el=0.02*ep,ek=6,hH=ep*0.5,jT=ep*0.25,lo=2,jo=30,or,hO="#000",dw=hO,c9=(em?"gray":"#fff"),ef="#f00",dv="#0f0",dG="#666",ej="#00f",ei="#f00",n9="#0f0",n_="#f00",n8={"stroke-width":0,"fill-opacity":0.4},n7={stroke:dv,fill:dv,"fill-opacity":0.2},hR={stroke:"deepskyblue",fill:"deepskyblue","fill-opacity":0.2,"stroke-width":c3},od={},j4=0.45*ep,ok=3.5*j4,oD=c1/720,oE=0.2,j2=0.3,j1=0.6*c1,oF=0.3*c1,oG=400,oH=80,oI=0.6,oJ=0.1;
function gO(){var a=aY.val();
if(!a){a=C}return a}function mY(a){aY.val(a)}function nn(){var a=1/hK;

if(aV){aV.setViewBox(nv.x-0.5*a*nu.x,nv.y-0.5*a*nu.y,nu.x*a,nu.y*a)}if(!d4){st.dn().eU()}}function oK(a){nv=a;
nn()}function oL(a){if(!a){return oB}return M.max(M.min(a,oy),oz)}function nT(f){var c=st.dn(),b,e,a,d;
if(bd(c.lx())>0){c.dQ();
b=c.c2.x-d0;
e=c.c2.y-d0;
a=c.c0.x+d0;
d=c.c0.y+d0;
hK=oL(M.min(nu.x/(a-b),nu.y/(d-e)));
if(f&&hK>f){hK=f}}else{hK=oB}oK(new b8(0.5*(b+a),0.5*(e+d)))}function zoomBox(a,b){hK=M.min(oy,nu.x/M.abs(b.x-a.x),nu.y/M.abs(b.y-a.y));
oK(co(a,b))}function zoomIn(a){nm();
if(a){oK(a)}else{nn()}if(!st.gL){mZ()}}function nm(){if(hK<oy){hK/=1-oA}}function zoomOut(){if(gN==aU){mZ()}no();
nn()}function no(){if(hK>oz){hK*=1-oA}}function nl(b,a,f){var e=b*ep/hK,d=a*ep/hK,c=st.gh();
if(st.gL||c.fQ()){nv.x+=e;
nv.y+=d;
if(f&&!st.gL){hu();
st.dn().ci(0,0,f);
hx(aV)}nn()}else{hu();
c.ci(e,d,f);
hx(aV)}hX()}function ey(a){if(os){if(!a){a=window.event}a.returnValue=F;
a.cancelBubble=T}else{a.preventDefault();
a.stopPropagation()}return F}function ez(a){if(!gP){return ey(a)}}function ie(){}function oM(){if(!aW){aW=$("#svgParent")}if(aV){aV.canvas.style.display="none"}nu=new b8(aW.width(),aW.height());
if(aV){aV.canvas.style.display="";
aV.setSize((d4?"100%":nu.x),nu.y)}else{aV=new Raphael("svgParent",(d4?"100%":nu.x),nu.y);
bD.apply(aV);
aV.oN=T;
st=new mQ();
mE(aV);
gd=new fM();
aV.canvas.onselectstart=ey;
aW.mousedown(nE).mousemove(n1).mouseup(nS).mousewheel(nM).mouseover(nc).mouseout(nd).bind("touchstart",nZ).bind("touchmove",nZ).bind("touchend",nZ)}nn()}function clearSelection(){hu();
st.gh().jq();
hx(aV)}function mX(){hu();
st.gh().lX();
hx(aV)}function cut(){hu();
st.gh().cut();
hx(aV)}function copy(){st.gh().copy()}function paste(){activateTool(al,aR);
st.mN();
var d=lR.b1(al,T),c,a,b=d.lT(),e=st.dn();
for(c=0,a=bd(d.ke);
c<a;
c++){e.kf(d.ke[c])}for(c=0,a=bd(b);
c<a;
c++){e.fq(b[c])}gP=T;
nz[0]=d.dT();
st.mx(d);
hX()}function flip(a){hu();
var b=st.gh();
if(b.fQ()){b.bN();
b.eG(a,nv);
b.jq()}else{b.eG(a)}hx(aV)}function doUngroup(){var a=st.gh();
if(hV){hu();
hV.h0();
hx(aV)}else{if(!a.fQ()){hu();
a.ungroupGroups();
hx(aV)}}}function clearReaction(){lE("")}function mE(a){a.clear();
a.jr=a.set();
a.hN=a.set();
a.fw=a.set();
a.hT=a.path("M0,0");
a.e5=[]}function saveFile(){oO(open("data:chemical/x-mdl-molfile;fileName="+(ed=="rxn"?"reaction.rxn":"molecule.mol")+";content-disposition=attachment,"+encodeURIComponent(lD()),"Download"))}function saveSVG(){if(aV&&aV.canvas){var c=st.dn(),b,a;

c.dQ();
b=c.c0.x-c.c2.x+2*d0;
a=c.c0.y-c.c2.y+2*d0;
aV.setSize(b,a);
aV.setViewBox(c.c2.x-d0,c.c2.y-d0,b,a);
oO(open("data:application/octet-stream;fileName=structure.svg;content-disposition=attachment,"+encodeURIComponent(aV.canvas.outerHTML),"Download"));
oM()}}function oO(a){setTimeout(function(){a.close()},500)}function nR(){e7(aV)}function lD(){st.mD();
return st.dn().lD()}function lE(b){if(!aV){oM()}mE(aV);
var a=new fp(aV,b);
st.mM(a);
if(d4){a.eU()}hx(aV);
nT(3)}function getReadOnly(){return st.gL}function setReadOnly(b){if(st.gL!=b){st.gL=b;
var a=$("#leftCol");
if(b){a.attr("data-width",a.attr("width"));
a.attr("width",1);
$(".toolbar").hide();
gd.fP();
st.mD();
mS();
hW(aV);
nR();
mV()}else{a.attr("width",a.attr("data-width"));
$(".toolbar").show();
a4=T}}}function getDisplayAtomNumbers(){return st.db}function setDisplayAtomNumbers(a){if(st.db!=a){st.db=a;
st.dn().eU()}}function highlightAtom(e,b,a){if(a==al){a=T}var d=st.dn().fL[bu(b)],c;
if(d){c=d.dS[e];
if(c){c.dc=a;
c.eU()}}}function unhighlightAtoms(b){var a=st.dn(),e,d,c;
if(b!=al){e=a.fL[bu(b)];
for(c=bd(e.dS)-1;
c>=0;
c--){d=e.dS[c];
if(d.dc){d.dc=F;
d.eU()}}}else{for(c=bd(a.fL)-1;
c>=0;
c--){unhighlightAtoms(c)}}}function highlightBond(c,b,a){if(a==al){a=T}var d=st.dn().fL[bu(b)],e;
if(d){e=d.dh[c];
if(e){e.dc=a;
e.eU()}}}function unhighlightBonds(b){var a=st.dn(),d,e,c;
if(b!=al){d=a.fL[bu(b)];
for(c=bd(d.dh)-1;
c>=0;
c--){e=d.dh[c];
if(e.dc){e.dc=F;
e.eU()}}}else{for(c=bd(a.fL)-1;
c>=0;
c--){unhighlightBonds(c)}}}function unhighlightAll(a){unhighlightAtoms(a);
unhighlightBonds(a)}function showURL(a){var c=$("#infoArea"),b=(gQ?1.8:1);
if(!a){c.hide();
oM()}else{if(c.firstChild||(nu.x>600*b&&nu.y>400*b)||!open(a)){c.show().height("50%");
$("#infoContent").html("<iframe src="+bs(a)+' width="99%" height="'+(os?0.5*nu.y:"95%")+'"/>');
oM()}}}function getMode(){return ed}function getParams(){return"?lang="+lang+"&mode="+ed+"&embedded="+(ow||"")}function mr(b,a){os?(a?b.show():b.hide()):(a?b.slideDown():b.slideUp())}function getImgSt(a){return'<img src="icons/'+a+(d4?'.svg" width="'+iconSize+'" height="'+iconSize+'"':'.png"')}$(window).load(function(){aX=$("html");
aY=$("#newAtomSym");
aZ=$("#templateShortcuts");
a0=$("#templateName");
a1=$(".templatesMenu").css({opacity:0.85}).mouseleave({obj:this},oe);
a3=$("#editIcon");
$("#fileUpload").change(m4);
$.event.props.push("dataTransfer");
aX.bind("drop",m4).bind("dragover",m2).bind("dragend",ey).keydown(nh).keyup(nr);
if(ov){aX.bind("contextmenu",ey)}if(!em){$("body").bind("contextmenu",ey)}aX.onscroll=ey;
if(gQ){aX.bind("input",ng)}window.onresize=oM;
var a=M.min(aX.width(),aX.height());
hK=oL(0.01*a);
or=M.min(600,a)+am;
oM();
var b=aW.offset();
$("#overlay").css({left:b.left+am,top:b.top+am});
if(ed=="rxn"){$(".modeRxn").show()}else{if(ed=="tmpl"){$(".modeTmpl").show()}else{$(".modeMol").show()}}if(!os&&!ow){$(".modeFile").show()}if(ow){$("#copyright").hide();
$("#info").css("font-size","7pt")}if(by("readonly")){setReadOnly(T)
}else{$(au+" > img").mouseenter(m9).click(m6);
$(au).mouseleave(m_).click(m_);
$(at).click(m8);
$(".tool").click(nb);
$("td.separator + td").addClass("afterSeparator");
setTimeout(function(){oc()},50);
bC();
m0(".defaultTool");
if(!by("nofocus")){aY.focus().blur()}}$.rule(at).css("left",(iconSize+6)+"px");
if(gQ){a2=$("#touchCursor").show();
$.rule("input,.button").css("font-size","20pt");
aY.click(function(){this.select()})}isReady=T});
function cleanStructure(d){st.mD();
var e,c=st.gh(),f=[],b,a;
hu();
if(c.fQ()){f.push(st.dn())}else{f=c.mj()}for(b=0,a=bd(f);
b<a;
b++){e=f[b];
e.jj(d);
e.eU()}hx(aV);
nT(3);
if(on&&gN==aQ){op()}}function lI(e){var g=this,f=g.fL,b,d,a,c=0,h;
g.kz(F);
for(d=bd(g.ke)-1;
d>=0;
d--){g.ky(g.ke[d],T)}for(d=bd(f)-1;
d>=0;
d--){b=f[d];
if(!bd(b.dS)){bS(b,g.fL);
if(d<g.kg){g.kg--}}}h=g.kg;
for(d=0,a=bd(f);
d<a;
d++){b=f[d];
b.jj(e);
if(d==h){g.la(c,al,T);
c+=kY+d0}else{if(d>0){g.kw(c,0,T);
c+=dt+d0}}b.dQ();
b.jA(c);
c+=(b.c0.x-b.c2.x)+d0}if(d==h){g.la(c)}g.kg=h;
nT(3);
mS()}function kc(d){if(!this.jv){this.ip()}for(var e=this,c=e.j_(),b=0,a=bd(e.jv);
b<a;
b++){e.jv[b].jj(d,c)}}function jk(c,b){var d=this,a=d.dT().b1();
new oP(d,c,b);
d.ci(a.cn(d.dT()))}function oQ(){var e=this,c=e.h3,g,h,f=e.oR(),l=e.oS(),b=e.oT(),j,d,a,i=oI,k=c.jl();
while((e.oU=f+l+b)>oJ){if(g==1||(!g&&b>f)){e.oV(i);
h=1}else{e.oW(i);
h=2}j=e.oR();
d=e.oS();
a=e.oT();
if(j+d+a<e.oU){f=j;
l=d;
b=a;
k=c.jl();
i*=0.98}else{c.jm(k);
if(M.abs(i)<0.05){break}if(g){i*=0.5;
g=0}else{i*=-0.8;
if(h==1){g=2}else{g=1}}}}}function oX(){var d=this,b=!d.oY,c=d.h3,l,g,f,k,e,a,n,m,h,o=0;
d.oZ=[];
for(l=0,g=bd(c.dS);
l<g;
l++){k=c.dS[l];
for(f=0;
f<l;
f++){e=c.dS[f];
a=k.cX.cH(e.cX,b);
if((n=j1*(b?1:2)-a)>0){m=j2*n*n;
d.oZ.push(new o0(k,e,a,n,m));
o+=m}}if(b){o+=M.abs(k.cX.z)}}for(l=0,g=bd(c.dh);
l<g;
l++){k=c.dh[l];
h=c1;
if(k.di==0){h*=1.3}a=k.cW.cX.cH(k.cY.cX,b);
if(a!=h){d.oZ.push(k)}k.o1=h;
k.bd=a;
n=M.abs(h-a);
m=(a>oF?n:n*oG);
k.o2=m;
o+=m}return o}function o3(){var r=this,f=!r.oY,k=r.h3,n,l,m,p,b,c,u,t,a,v,e,h,g,q,o=0;
for(n=0,l=bd(k.dh);
n<l;
n++){c=k.dh[n];
u=c.cW;
t=c.cY;
a=t.cX.cn(u.cX,f);
if(!a.x&&!a.y&&!a.z){o+=oH;
continue}e=a.cp();
g=al;
for(m=0,p=bd(k.dS);
m<p;
m++){b=k.dS[m];
if(!b.bG(u)&&!b.bG(t)){v=b.cX.cn(u.cX,f);
if((q=oF-e.ce(v).bd())>0){if((h=a.cb(v))>=0&&h<=(g||(g=a.cb(a)))){o+=oH*q*q}}}}}return o}function o4(){var e=this,b,a,d,f,c=0;
for(b=0,a=bd(e.o5);
b<a;
b++){d=e.o5[b];
d.o6();
f=oD*(oE*d.cH*d.cH+M.abs(d.cH));
d.o2=f;
c+=f}return c}function o7(){for(var f=this,d=0,c,a,e=[],b;
d<3;
d++){f.o8[d].o6()}f.cH=0;
if(a=f.o9){for(d=0;
d<3;
d++){e[d]=[];
for(c=0;
c<3;
c++){e[d][c]=(f.o8[d].o_?M.abs(a[c]-f.o8[d].o9):0)}}b=pa(e);
for(d=0;
d<3;
d++){for(c=0;
c<3;
c++){if(f.o8[d].o_){if(c!=b[d]){e[d][c]=an}}else{e[d][c]=M.abs(a[c]-f.o8[d].o9)}}}b=pa(e);
for(d=0;
d<3;
d++){f.cH+=(f.o8[d].o9=e[d][b[d]])
}}}function pa(e){for(var g=0,b=bd(e),j=[],h=[],f,a,l,d;
g<b;
g++){h[g]=0;
j[g]=g}d=pb(e,j);
l=j.slice();
g=1;
while(d>0&&g<b){if(h[g]<g){f=g%2&&h[g];
a=j[g];
j[g]=j[f];
j[f]=a;
++h[g];
g=1;
if(pb(e,j)<d){l=j.slice()}}else{h[g]=0;
++g}}return l}function pb(e,d){for(var b=0,c=0,a=bd(d);
b<a;
b++){c+=e[b][d[b]]}return c}function pc(){var d=this,b=d.pd,c=d.pe,a=d.gm;
d.pf=(d.pg.oY?jS(a,c,b):en(a,c,b));
d.cH=d.pf-d.o9}function ph(){var c=this,b=c.gm,a=bd(b.dh);
if(a>3||a==b.gv()){if(a<5){c.o9=[ai,ai,ai]}else{if(a==5){c.o9=[ac,ac,ad]}else{if(a==6){c.o9=[ac,ac,ac]}else{if(a==7){c.o9=[72,ac,ac]}else{if(a==8){c.o9=[0.5*ai,ac,ac]}}}}}}else{c.o9=[ad,ad,ad]}}function pi(b){var h=this,a=h.pg,f=h.gm,d=bd(f.dh),e=f.gv(),c=f.df,g;
if(e==4&&d==2){h.o9=ae}else{if((a.oY?d==e:d==4)&&(c=="P"||c=="S")){h.o9=ac}else{if(a.oY&&(c=="P"||c=="S"||d==e)){h.o9=ai}else{if(d==6||(d>3&&h.pf<90)){h.o9=60}else{if((g=a.pj)&&bd(g)&&d==3&&(c=="N"||c=="P")){h.o9=(b?210:(a.oY?90:75))}else{if(d==2&&h.pf>ae){h.o9=240}else{h.o9=ad}}}}}}}function pk(d,c){if(d.o2==c.o2){return 0}if(d.o2==undefined||d.o2<c.o2){return 1}return -1}function pl(l){var n=this.oZ,k=this.oY,j,g,h,f,e,a,c,b,r,q,p=0,d,o,m;
if(g=bd(n)){l=M.abs(l);
n.sort(pk);
for(j=0;
j<g;
j++){h=n[j];
if(h.o2<0.1){break}if(j/g<M.random()){a=h.bd;
c=h.cW;
b=h.cY;
r=l*(b.cX.x-c.cX.x)*(h.o1-a)/a;
q=l*(b.cX.y-c.cX.y)*(h.o1-a)/a;
if(k){p=l*(b.cX.z-c.cX.z)*(h.o1-a)/a}o=bd(c.dh);
m=bd(b.dh);
d=o+m;
o/=d;
m/=d;
if(!(h instanceof ge)||bd(h.dR())==0){f=c.gZ(b);
f.fl(h);
e=b.gZ(c);
e.fl(h)}else{f=c.cX;
e=b.cX}f.ci(-r*m,-q*m,-p*m);
e.ci(r*o,q*o,p*o)}}if(!k){l=0.9-l;
for(n=this.h3.e9(),j=g-1;
j>=0;
j--){n[j].z*=l}}this.h3.cp()}}function pm(b,a){return(M.abs(b.cH)<31-M.abs(a)*50?0:(b.cH>0?-1:1))}function pn(w){var A=this.o5,x=this.po,E,z,D,K,B,r,a,b,l,J,g=[],G,v,e,o,n,h,f,m=[],q=(w>0?1:0),t,I,u,L,d,p,y,N,c;
x.sort(pk);
for(E=0,z=bd(x);
E<z;
E++){f=F;
r=x[E];
b=r.gm;
a=b.cX;
u=d=p=0;
L=a.eH(r.pp[0].cX,r.pp[1].cX,r.pp[2].cX);
for(D=0;
D<3;
D++){l=r.dh[D];
L/=l.cW.cX.cH(l.cY.cX)+Number.pq}if(t=(M.abs(L)<0.0001)){e=0;
for(D=0;
D<3;
D++){N=r.o8[D].pf;
e+=N;
if(N>u){u=r.o8[D].pf;
L=D}}e=(e<358);
u=pm(r.o8[L],w)}for(D=0;
D<3;
D++){d+=(J=pm(r.o8[D],w));
if(J==0){p++;
if(!t){L=D}}}if(p<3){y=[];
for(D=0;
D<3;
D++){l=r.dh[D];
if(bd(l.dR())){N=new gY(T);
N.fG(l);
N.fC(l.gr(b));
f=T}else{N=l.gZ(b)}y.push(N)}if(t){c=r.o8[L];
if(M.abs(d)>1&&e){o=a.eD(c.pe.cX,c.pd.cX);
n=a.cA(o);
l=0;
for(D=0;
D<3;
D++){l+=(D==L?1:-1)*r.o8[D].cH;
g[D]=0}for(D=0;
D<3;
D++){if(D!=L){I=r.o8[D].cH+0.3*l;
for(B=0;
B<3;
B++){if(D!=B){g[B]+=(a.eH(r.dh[B].gr(b).cX,r.dh[D].gr(b).cX,n)>0?1:-1)*I}}}}for(D=0;
D<3;
D++){y[D].cq(g[D]*af,o,a)}}if(d<0||(e&&u<d-u)||(r.o8[L].pf>175&&r.o8[L].cH>0)){I=0;
for(B=0;
B<3;
B++){if(!e||L!=B){I-=r.o8[B].cH}}c=a.eD(c.pe.cX,c.pd.cX,r.pp[L].cX);
for(B=0;
B<3;
B++){y[B].cq(bx((B==L?0.5:-0.25)*I*w,-30,30)*af,c,a)}}}if(M.abs(d)>(t?2:1)){I=0;
c=a.eI(r.pp[0].cX,r.pp[1].cX,r.pp[2].cX);
for(D=0;
D<3;
D++){for(B=0;
B<3;
B++){if(D!=B){I-=r.o8[B].cH}}y[D].cq(bx(I*M.abs(w),-30,30)*af,c[D],a)
}}else{if(p==1&&(!t||u==0)){for(B=0;
B<3;
B++){if(L!=B){if((h=r.o8[B].cH)>0){o=B}else{n=B}I+=M.abs(h)}}if(o+n){c=a.eD(r.pp[n].cX,r.pp[o].cX);
y[L].cq(bx(0.5*I*M.abs(w),-30,30)*af,c,a)}}}}if(f){for(B=0;
B<3;
B++){c=this.pr[r.pp[B].bE];
for(D=0,K=bd(c);
D<K;
D++){c[D].o6()}}}else{for(B=0;
B<3;
B++){r.o8[B].o6()}}}if(bd(A)){A.sort(pk);
w=M.abs(w);
m=[];
for(E=0,z=bd(A);
E<z;
E++){r=A[E];
if(r.o2<1){break}if(E/z<M.random()&&(E+q)%2){b=r.gm;
a=b.cX;
o=r.pe;
n=r.pd;
h=bd(o.dh);
f=bd(n.dh);
e=h+f;
c=a.eD(n.cX,o.cX);
if(K=bd(r.ps)){for(D=0;
D<K;
D++){G=r.ps[D];
v=G.gZ(b);
v.cq(w/oI/K*r.cH*af*(G.iH(n)?1:-1),c,a)}}else{if(!bL(m,b)&&!bL(m,o)&&!bL(m,n)){m.push(b,o,n);
o.cX.cq(r.cH*w*f/e*af,c,a);
n.cX.cq(r.cH*-w*h/e*af,c,a)}}}this.h3.cp()}}}function pt(p){var o=this.o5,h,f,e,c,g,k,b,t,d,r,q,m,l,a=[],n=(p>0?1:0);
p=M.abs(p);
if(f=bd(o)){o.sort(pk);
for(h=0;
h<f;
h++){g=o[h];
if(g.o2<1){break}if(h/f<M.random()&&(h+n)%2){k=g.gm.cX;
m=g.pe;
l=g.pd;
r=bd(m.dh);
q=bd(l.dh);
d=r+q;
if(c=bd(g.ps)){for(e=0;
e<c;
e++){b=g.ps[e];
t=b.gZ(g.gm);
t.eB(p/oI/c*g.cH*af*(b.bG(g.dh[0])?1:-1),k)}}else{if(!bL(a,g.gm)&&!bL(a,m)&&!bL(a,l)){a.push(g.gm,m,l);
m.cX.eB(g.cH*p*q/d*af,k);
l.cX.eB(g.cH*-p*r/d*af,k)}}}}this.h3.cp()}}function o0(b,a,c,e,d){this.cW=b;
this.cY=a;
this.o1=j1;
this.bd=c;
this.cH=e;
this.o2=d}function pu(a,d,c,b){var e=this;
bD.apply(e);
e.pg=a;
e.gm=d;
e.pe=c;
e.pd=b;
e.dh=[d.g3(c),d.g3(b)];
e.pv=pw;
e.o6=pc;
e.px=pi;
e.o6()}function py(a,e,d,c,b){var f=this;
bD.apply(f);
f.gm=e;
f.pp=[d,c,b];
f.dh=[e.g3(d),e.g3(c),e.g3(b)];
f.o8=[a.pz(e,c,b),a.pz(e,d,b),a.pz(e,d,c)];
f.pv=pA;
f.o6=o7;
f.px=ph}function pB(g,f,d){for(var h=this,c=h.pr[g.bE],b,e=0,a=bd(c);
e<a;
e++){b=c[e];
if((f.bG(b.pe)&&d.bG(b.pd))||(f.bG(b.pd)&&d.bG(b.pe))){break}}if(e==a){b=new pu(h,g,f,d)}return b}function pC(h,b,a,j){var e=this,c=e.pD[h.bE],g,f,d;
if(c){for(g=0,f=bd(c);
g<f;
g++){d=c[g];
if(bL(d.pp,b)&&bL(d.pp,a)&&bL(d.pp,j)){break}}}else{c=[];
e.pD[h.bE]=c}if(g==f){d=new py(e,h,b,a,j);
c.push(d);
e.po.push(d);
d.pv()}return d}function pA(){for(var a=0;
a<3;
a++){this.o8[a].pv()}this.px()}function pw(k){var b=this,f=b.pg,g=b.dh,e=bd(g)-1,d,c,h,j,a=(b.pf<ae||bd(b.gm.dh)>2);
if(!b.ps){if(a){b.ps=[];
for(;
e>=0;
e--){if(!bd(g[e].dR())){b.ps.push(g[e])}}f.pr[b.gm.bE].push(b)}j=bV(f.g1,g[0].dR(),g[1].dR());
if(d=bd(j)){for(e=0;
e<d;
e++){c=j[e];
h=f.pE[c.bE];
if(!h){h=[];
f.pE[c.bE]=h}if(a){h.push(b)}if(!c.o9){k=bd(c.dS);
c.o9=(f.oY&&!c.i3()&&(k==8||(k==6&&c.i4()))?ai:pF(k))}}b.o9=(a?j[0].o9:aj-j[0].o9);
b.o_=T}else{b.px(k)}}return !!d}function pF(a){return ae-aj/a}function pG(d,c){if(d.pf<c.pf){return 1}if(d.pf>c.pf){return -1
}return 0}function pH(){var p,l,h,b,g,f,d,e=this,c=e.h3,t,u,r,q,o,a,w,v;
for(p=0,l=bd(c.dS);
p<l;
p++){t=c.dS[p];
u=t.dh;
a=[];
e.pr[t.bE]=[];
b=bd(u);
if(e.oY&&b>2){for(h=0;
h<b;
h++){r=u[h];
for(g=h+1;
g<b;
g++){q=u[g];
for(f=g+1;
f<b;
f++){o=u[f];
for(d=f+1;
d<b;
d++){if(u[d].iI().eK(r.iI(),q.iI(),o.iI())){d=-1;
break}}if(d>0){e.pI(t,r.gr(t),q.gr(t),o.gr(t))}}}}}else{if(b>1){for(h=0;
h<b;
h++){a.push(new gl(t,u[h].gr(t)))}a.sort(gn);
v=T;
for(h=0;
h<b;
h++){g=(h+1)%b;
w=e.pz(t,a[h].gm,a[g].gm);
if(!w.pv(v)){v=F}}}}bX(e.o5,e.pr[t.bE])}}function pJ(){for(var d,a,g=this.h3.dS,h,f,n,k,m,b,l,e=0,c=bd(g);
e<c;
e++){h=g[e];
n=this.pr[h.bE];
if((a=bd(n))>2){m=0;
k=0;
if(!this.oY||a<4){b=aj}else{if(a<7){b=ai}else{if(a<11){b=96}else{if(a<16||a>21){b=ac}else{b=82.29}}}b*=a}for(d=0;
d<a;
d++){f=n[d];
if(f.o_){m+=f.o9}else{k+=f.o9}}k+=m;
if(this.oY?k>b:k!=b){if(m<b){l=(b-m)/(k-m);
for(d=0;
d<a;
d++){f=n[d];
if(!f.o_){f.o9*=l}}}else{l=b/k;
for(d=0;
d<a;
d++){f=n[d];
f.o9*=l}}}}}}function pK(){for(var d=this.h3.dh,c,b=0,a=bd(d);
b<a;
b++){c=d[b];
c.o1=al;
c.bd=al;
c.o2=al}d=this.g1;
a=bd(d);
for(b=0;
b<a;
b++){d[b].o9=al}}function pL(d){if(bd(d.dS)<10){var b=this,h=d.dS,k,f,a=d.o9,m=b.pE[d.bE],g,e=bd(m),p,n=0,o=0,j,c,l;
for(g=0;
g<e;
g++){p=m[g];
if(M.abs(p.o9-a)<oC){n++}else{o+=a-p.o9}}if(o){j=o/n;
for(g=0;
g<e;
g++){p=m[g];
if(M.abs(p.o9-a)<oC){p.o9+=j}}}d.i1();
e=bd(h);
if(b.oY){d.iS();
if(a==ai){a=pF(e);
if(e==8){k=[[p=15,p,-p,-p,p,p,-p,-p,3]]}else{k=[[p=(ai-ac)*0.5,p,-p,p,p,-p,2],[p,-p,p,-p,p,-p,1]]}}if(k){f=an;
while(j=k.pop()){o=j.pop();
for(;
o>=0;
o--){c=0;
for(g=0;
g<e;
g++){c+=M.abs(d.i2(h[g])-j[g])}if(c<f){f=c;
n=j.slice()}if(f==0){break}if(o>0){bT(j)}}}j=n}a=ae-a;
k=h[0];
n=k.cX;
n.ci(d.iP.b7(-d.iP.cb(n.cn(d.fc))));
n.eA(0.5*c1/M.sin(0.5*a*af)/n.cH(d.fc),d.fc);
for(g=1;
g<e;
g++){k=h[g];
k.cX=n.b1();
k.cX.cq(a*g*af,d.iP,d.fc)}if(j){for(g=0;
g<e;
g++){k=h[g].cX;
k.cq(-j[g]*af,d.iP.ce(k.cn(d.fc)).cp(),d.fc)}}}else{for(g=1;
g<e;
g++){k=h[g];
f=h[g-1];
if(g==1){c=en(f,k);
k.cX=cQ(f.cX,c,c1)}else{p=bV(m,b.pr[k.bE]);
if(bd(p)==1){p=p[0];
if(!l){l=(h[2].cX.ev(h[0].cX,h[1].cX)?1:-1)}c+=(ae-p.o9)*l;
k.cX=cQ(f.cX,c,c1)}}}}}}function pM(){for(var c=this,b=0,a=bd(c.g1);
b<a;
b++){c.pN(c.g1[b])}}function oP(a,j,e){var b=this,g=[],f,h,l,d,c,k=1;
b.h3=a;
b.oY=j;
b.o5=[];
b.po=[];
b.pr={};
b.pD={};
b.pE={};
b.pj=e;
b.pO=pH;
b.oR=oX;
b.oS=o3;
b.oT=o4;
b.oW=pl;
b.oV=(j?pn:pt);
b.pP=pM;
b.pN=pL;
b.pQ=pJ;
b.jj=oQ;
b.pR=pK;
b.pz=pB;
b.pI=pC;
for(d=bd(a.h4)-1;
d>=0;
d--){c=a.h4[d];
if(c.type==ar){f=c.he.slice();
h=c.dh.slice();
l=c.hd.slice();
c.h0(l,h);
g.push({df:c.df,dS:f,dh:h,hd:l})}}b.g1=iJ(a.dR());
b.pO();
do{b.pP();
b.pQ();

b.jj();
k--}while(k>0&&b.oU>oJ);
b.pR();
for(d=bd(g)-1;
d>=0;
d--){c=g[d];
a.ec.hv(c.df,c.dS,c.dh,c.hd)}a.fd(ba)}hideMenu=m_;
getMolRxnfile=lD;
setMolRxnfile=lE;
centerView=oK;
zoomFit=nT;
redrawChanged=nR;
delSelection=mX;
Point3D=b8;
pS=fp;
Molecule=fn;
Atom=gb;
Bond=ge;
Selection=gY;
